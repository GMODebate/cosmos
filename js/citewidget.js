!async function(O,N,e,E,t,i,r,a,o,l,m,s,re,c,d,f,z,C,p,u,v,w,b,k,M,Q,j,T,_,y,H,ae,oe,L,le,se,ce,de,fe,pe,ue,he,I,ge,U,xe,me,ve,q,D,we,S,be,h,g,A,x,ke,Te,P,R,_e,ye,Le,$,Oe,K,Ne,Ee,F,B,ze,Ce,Me,Qe,je,He,Ie,Ue,qe,De,Se,Ae,Pe,Re,$e,Ke,Fe,Be,Ve,Je,Ye,We,Xe,V,Ge,Ze,et){ze("div.citewidget .buttons>a,div.citewidget ul.sources li a span.url,div.citewidget ul.sources>li>a.pdf:hover{text-decoration:underline dotted 1px;text-underline-offset:3px}div.citewidget>div{border-left:0;border-right:0;padding-left:15px;padding-right:15px}div.citewidget .desc,div.citewidget .desc p{font-size:20px;line-height:1.4em;font-weight:400}div.citewidget .desc>h3.article-title{font-size:20px;line-height:1.4em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;font-weight:400;margin:5px 0 10px;font-family:Merriweather,serif;color:#555;font-style:italic}div.citewidget .desc>h3.article-title::before{color:#e1f3db;content:open-quote;font-size:45px;line-height:.1em;margin-right:.25em;vertical-align:-.4em}html.dark div.citewidget .desc>h3.article-title{color:#ffffffb8}html.dark div.citewidget .desc>h3.article-title::before{color:#333333b0}div.citewidget .desc q.cite{font-weight:700;max-height:1.4em;display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%;vertical-align:bottom}div.citewidget .buttons{display:flex;justify-content:space-around;flex-wrap:wrap;align-items:center;gap:10px;margin-top:.5em}div.citewidget .buttons>a{display:flex;justify-content:center;align-items:center;gap:5px;text-align:center;border:2px solid #f1f9ef;padding:5px 10px;min-height:30px;width:25%;white-space:nowrap;text-decoration-style:dotted;color:#000;font-size:20px;line-height:1.4em;font-weight:500;border-radius:2px}div.citewidget .buttons>a:hover{background:#f0f3e970}div.widget.citewidget{justify-content:center}html.dark div.citewidget .buttons>a{border-color:#fff;color:#fff;transition:none;text-decoration:none}html.dark div.citewidget .buttons>a:hover{background:#fff;color:#000}div.citewidget ul.sources{margin-top:5px;margin-bottom:10px}div.citewidget ul.sources>li{display:flex;align-items:center}div.citewidget ul.sources li a{display:flex;flex-direction:column;text-decoration:none;color:#000;font-size:18px;line-height:1.4em}div.citewidget ul.sources>li>a.link{flex:1}div.citewidget ul.sources>li>a.pdf{background:#c20a0a;font-size:18px;line-height:30px;font-weight:700;color:#fff;display:inline-block;padding:0 7px;border-radius:5px;font-family:Montserrat,sans-serif}html.dark div.citewidget ul.sources li a{color:#fff}div.citewidget ul.sources li{transition:border-color .2s}div.citewidget ul.sources li:hover::before,html.dark div.citewidget ul.sources li:hover::before{border-left-color:#3da508}div.citewidget ul.sources li a span.title,div.citewidget ul.sources li a span.url strong{font-weight:500}div.citewidget ul.sources li a span.desc{font-size:16px;font-weight:200;font-style:italic;line-height:20px;display:block}div.citewidget ul.sources li a span.url{font-weight:300;font-size:14px;line-height:18px;font-family:Montserrat,sans-serif;color:#007934;max-height:36px;overflow:hidden;text-overflow:ellipsis;display:block}html.dark div.citewidget ul.sources li a span.url{color:#fff;font-weight:400}@media screen and (max-width:800px){div.citewidget .buttons{flex-wrap:wrap}div.citewidget .buttons>a{width:45%;font-size:16px;padding:7px 20px;min-height:unset;min-width:unset;display:block;box-sizing:border-box;flex-basis:45%;box-sizing:border-box;font-weight:700}}@media screen and (max-width:550px){div.citewidget .desc,div.citewidget .desc p{font-size:18px}div.citewidget .buttons>a{font-size:15px;padding:7px 10px}}@media screen and (max-width:450px){div.citewidget .buttons>a{font-size:14px;font-weight:500}}@media screen and (max-width:400px){div.citewidget .buttons>a{font-size:13px}}@media screen and (max-width:380px){div.citewidget .buttons{gap:7px}div.citewidget .buttons>a{width:98%}}");var J,Y,n,W,X,G,Z,ee,te,tt=z(".reader-container");function ie(e,t){n||Xe({key:"pdf-backups",position:"bottom",backup_type:"pdf",modules:"mirror",html_class:"dropmenu_backups",pdf:t},!(n=!0),z(".widget.backups"));var i=Ge("pdf-backups");i.pdf=t,i.cite=e,V("pdf-backups",!0)}function ne(t,i){var n=[];if(t=t.match(/^(next|prev|self)(\d+|(#|\.)[a-z0-9\-_]+)?$/)||t.match(/^(((#|\.)[a-z0-9\-_]+))$/)){includeP=!0;var r=t[1],a=1;let e;if(/^(#)/.test(t[2])){if(!(e=z(t[2])))return m("cite until target",t[2])}else"self"===r?a=1:t[2]&&!isNaN(t[2])&&(a=parseInt(t[2]));for(var o,l,s=!0,c=i,d=0,f=[],p=0,u=e=>{let t;function i(){t||(e=D(e),t=!0)}var n=[".chapter-link > sup","a.examine","script"].join(",");if(C(n,e).length&&(i(),n=C(n,e),x(n)),z("cite[data-ref]",e)&&(i(),I(C("cite[data-ref]",e),(e,t)=>{Le(t,[h(t.innerText),h(` (${M(t,"data-ref")})`)])})),o=e.innerText,H(e,"quote")&&["P","A"].includes(l)?(i(),x(C(".pdf",e)),o=e.innerText.trim(),n=("A"===l?e:z("a",e)).href,o="["+o.replace(/\n/g," ")+"]("+n+")"):"LI"===l?o="- "+o:"UL"===l||"OL"===l?(o=[],I(C("li",e),function(e,t){o.push("- "+t.innerText)}),o=o.join("\n")):/H[0-9]/.test(l)&&(o="# "+o),p){var r,a=[];for(r of o.split(/\n/))""!==(r=r.trim())&&a.push("> ".repeat(p)+r);o=a.join("\n")}(o=o.trim())&&f.push(o.trim())};c&&!0===s;){if(c===e){s=!1;break}if(!(s="self"===r?c:("next"===r?P:R)(c))){if("BLOCKQUOTE"===(l=g(c).nodeName)){c=g(c),p&&p--,s=!0;continue}if("LI"===l){c=A(g(c),function(e){return"UL"===e.nodeName||"OL"===e.nodeName}),s=!0;continue}if(s)continue;break}if(l=s.nodeName,!["STYLE"].includes(l)){if(["HEADER","FOOTER"].includes(l)){s=!1;break}if(H(s,"nocite")||!s.innerText)c=s,s=!0;else if("BLOCKQUOTE"===l)c=("next"===r?ke:Te)(s),p++,l=c.nodeName,u(c),s=!0;else if(d++,u(c=s),s=!0,e){if(c===e){s=!1;break}}else if(d===a){s=!1;break}}}"prev"===r&&f.reverse(),p&&(f=f.map(e=>"> ".repeat(p)+e)),n.push(...f)}return n}l("citewidget",[[function n(s,e){var a,o,c,d;if(re(e?"cite_close":"cite_open","cite",e?"Close citation":"Open citation"),!H(s,"nocite")){if(s.isQuote="CITE"!==s.nodeName&&(H(s,"quote")||H(s,"cite-link")),s.isPDFLink=H(s,"pdf-link")||j(s,"data-pdf-link"),s.isPDFLink){let e={},t=B(s,"data-pdf");t||(f=z("[data-pdf]",s))&&(t=B(f,"data-pdf")),t&&(e=t);var f="A"!==s.nodeName?z("a",s):s;return e.title||(e.title=f.innerHTML),e.files=[],e.file&&e.files.push({link:f.href,path:e.path,file:e.file,title:e.title||s.innerHTML}),ie(s,e)}if(s.isQuote){if(s.clickedTarget&&H(s.clickedTarget,"local"))return;if(s.sources=[],z(".source a",s))for(a of C(".source a",s))H(a,["pdf","no-source"],!0)||(d=B(a,"data-config")||{},s.sources.push(Object.assign(d,{el:a})));else{var f=B(s,"data-config")||{},p=z(".source .lnk",s);s.sources.push(Object.assign(f,{el:D(s,null,p?p.innerHTML:"",!0)}))}"CITE"!==s.nodeName&&"A"!==s.nodeName&&(s.clicked=A(s.click_el,function(e){return"A"===e.nodeName}));f=s.clicked||s;if(H(f,"pdf")||"A"===f.nodeName&&/\.pdf$/.test(f.href)){var u,h,g={files:[]};for(u of C(".source a",s))H(u,"pdf")||(h=B(u,"data-pdf"))&&g.files.push({link:u.href,path:h.path,file:h.file,title:u.innerHTML});return g.files.length||(p="A"===s.nodeName?s:z(".source a",s),g.files.push({link:p.href,path:f.pathname,file:f.pathname.split("/").pop(),title:p.innerHTML}),g.base=!1),ie(s,g)}(p=M(s,"data-rel"))||"A"===s.nodeName||(p=M(s,"rel"))}else p=M(s,"rel");oe(J)&&(f=z("#citations"),J=f?JSON.parse(f.textContent):{},G=J._tpl.text,Z=J._tpl.prompt,ee=J._tpl.text_quote,te=J._tpl.prompt_quote,W=z(".widget.citewidget"),X=z(".desc",W),Y=z(".reader .buttons a.cite",tt));let i={},t=p;if(p&&J){let e;for(o of p.split(","))J[o]&&(c=J[o],e?i.config&&i.config.ref&&c.config&&c.config.ref&&(i.config.ref+=`
`+c.config.ref):(i=Object.assign({},c),t=i.rel||!1,e=!0))}f=B(s,"data-citation");if((i=f?Object.assign({},i,f):i)&&i.config&&s.sources)for(var[x,m]of s.sources.entries())s.sources[x]=Object.assign(i.config,m);var v,w=(s.isQuote?s:A(s,function(e,t){return e.nodeName,("DIV"!==e||!H(e,"contents"))&&["P","LI","BLOCKQUOTE","DIV"].includes(e.nodeName)},3))||s;i.type&&"link"===i.type&&(s.isQuote=!0,s.sources=[{el:D(Ne,{href:i.url},i.link_title||s.innerHTML,!0)}]),s.ref=M(s,"data-ref"),!s.ref&&i.config&&i.config.ref&&(s.ref=i.config.ref);let l;i.context||((t=t||(s.isQuote?"prev3,quote,next3":"prev3,p,next3"))?(v=[],t=t.split(","),I(t,function(e,t){if(/^(\.|#)/.test(t)){var i=C(t);I(i,function(e,r){if(H(r,["chapter","subchapter"],!0)){v.push("# "+r.innerText);let e=H(r,"chapter"),t=P(r),i,n=0;for(;t;){if(n++,H(t,e?"chapter":["chapter","subchapter"],!0)){(i=R(t)).id||Q(i,{id:"cite-"+n}),i=i.id,t=!1;break}t=P(t)}var a=ne(i=i?"next#"+i:"next"+n,r);v.push(...a)}else v.push(r.innerText)})}else switch(t){case"quote":v.push("--- quoted link start ---");var n,r=z(".title",s),a=z(".desc",s);let e=[];for(n of s.sources)e.push(`[${n.el.innerText}](${n.el.href})`);l=e=e.join("\n"),r=r?r.innerText:"",a=a?a.innerText:"",v.push("# "+r),a&&v.push(""+a),e&&v.push(e),s.ref&&v.push("# Citation reference:",s.ref),v.push("--- quoted link end ---");break;case"p":v.push("--- paragraph of citation ---"),v.push(ne("self",w).join("\n").replace(s.innerText,"**"+s.innerText+"**")),v.push("--- paragraph end ---");break;default:v.push(...ne(t,w))}}),s.ref&&v.push("---","# Citation reference:",s.ref),i.context=!!v.length&&v.join("\n")):i.context=!1),i.text||(i.text=s.isQuote?ee:G),le(i.text)||(i.text=[i.text]);let r;var b,k=[];for(b of i.text)if(s.isQuote&&"[QUOTE_LINKS]"===b){var T,_=q("ul",{class:"highlights small light sources"});for(T of s.sources){let e=T.el.hostname.replace(/^www\./,""),t=T.el.href.replace(e,`<strong>${e}</strong>`);/<strong>/.test(t)&&(t=t.replace(/^[^<]+</,"<"));var y=[D(K,{class:"title"},T.link_title||T.el.innerHTML,!0)];T.desc&&y.push(D(K,{class:"desc"},T.desc,!0)),T.nolink||y.push(D(K,{class:"url"},t,!0));let i,n;j(T.el,"data-pdf")?n=T.el:r||(n=z(".source a.pdf",s),r=!0),n&&(L=B(n,"data-pdf"),i=q("a",{href:"/pdf/"+L.file,class:"pdf"},"PDF"));var L=q("a",{href:T.el.href,target:"_blank",rel:"noopener",class:"link"},y),y=(T.nolink&&(U("click",e=>{e.preventDefault()},L),Q(L,{target:null,rel:null,href:"javascript:void(null);"})),[L]);i&&y.push(i),S(_,q("li",null,y))}b=b.replace("[QUOTE_LINKS]",_.outerHTML),k.push(...F(b))}else b=b.replace("[CITE]",s.innerText),k.push(q("p",{},F(b)));i.text=k,ve(async function(){if(e)CLOSE_MENU();else{var r=X;if($(r),s.isQuote&&!i.title){let e=z(".title",s);e&&((t=z("strong",e))&&(e=t),i.title=e.innerHTML,i.title_class="article-title")}i.title&&S(r,q("h3",{class:i.title_class||""},i.title,!0));var t="",a=(i.context&&(t=i.context),i.extra_context&&(t+="\n"+i.extra_context),""),o=(i.extra_prompt&&(a+=i.extra_prompt),a&&(a+="\n"),i.prompt?a+=i.prompt:a+=s.isQuote?te:Z,a=a.replace("[URL]",N.location.href).replace("[CONTEXT]",t).replace("[SITENAME]",E.sitename).replace("[QUERY]",s.innerText).replace("[SOURCES]",l||""),i.extra_prompt_after&&(a&&(a+="\n"),a+=i.extra_prompt_after),encodeURIComponent(a)),t=(S(r,i.text),z("a",z(".buttons",W),!0)),t=(I(t,function(e,i){var n=JSON.parse(M(i,"data-config"));"prompt"!==n.key&&!n.manual||U("click",function(e){n.manual&&H(i,"confirmed")||e.preventDefault();var t=q("textarea");t.value=a,S(N.body,t),t.select();try{N.execCommand("copy"),N.body.removeChild(t),n.manual?H(i,"confirmed")||(e.preventDefault(),ae(i,"confirmed"),confirm(n.manual,!0)&&O.open(i.href,"duck-ai")):(e.preventDefault(),j(i,"data-text")||Q(i,{"data-text":i.innerHTML}),i.innerHTML="âœ…",setTimeout(function(){i.innerHTML=M(i,"data-text")},2e3))}catch(e){$(r),S(r,t)}},i),"prompt"!==n.key&&(i.href=n.href.replace("{query}",o))}),Ze(z("img[data-z], [data-anim]",W,!0)),await V(Y,!0));s.isQuote&&z("a.pdf",W)&&t.events.push(U("click",e=>{e.preventDefault(),e.stopPropagation();e=z(".source",s);e&&(s.click_el=z("a.pdf",e),n(s))},C("a.pdf",W)))}})}},"SHOW_CITE_POPUP"]])}.apply(null,VRS);