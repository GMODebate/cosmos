!function(w,_){var k,G,T,l,u,Z,L,ee,a,t,s,n,o,A,te,ne,I,ae,re,ie,oe,ce,S,E,M,se,le,ue,de,q,e,r,c,p,i,h,m,g,b,y=_.addEventListener,N=_.documentElement,x=_.head,d={chapter:!1,subchapter:!1,prev:!1,next:!1},fe="localStorage"in w&&w.localStorage,pe="G-ECMX8QNF81",he=/^h[0-9]{1}$/i,me=/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?\/]{11})/,ge=w.innerHeight,ve=w.matchMedia("(prefers-color-scheme: dark)"),be=(ve.matches,navigator?navigator.userAgent:0),ye=".webp",xe=/(\.(jp(e)?g|gif|bmp|png|tiff))/gi,v=!(!(be&&(be=be.match(/.*\bChrome\/([0-9\.]+)|.*\bFirefox\/(\d+)\b.*/))&&(be[1]||be[2]&&65<=parseInt(be[2])))&&(p=[],c=!0,(i=new Image).onload=i.onerror=function(){v=0<i.height,c=!1,PROCESS_CALLBACK_QUEUE(p,v)},i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"));function we(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function _e(e,t){t=t||{};var n={client_id:h,session_id:m,non_personalized_ads:!0},a=new URLSearchParams,n=(Object.assign(a,n,t),a.append("en",e),a.append("_t",Date.now()),"https://www.google-analytics.com/g/collect?v=2&tid="+pe+"&"+a.toString());navigator.sendBeacon?navigator.sendBeacon(n):((t=new XMLHttpRequest).open("POST",n,!0),t.send())}function ke(){console.error.apply(console,je(arguments))}function Te(){}h=fe.getItem("ga_client_id")||we(),fe.setItem("ga_client_id",h),m=sessionStorage.getItem("ga_session_id"),g=parseInt(sessionStorage.getItem("ga_last_activity")||"0"),b=18e5,T=function(){var e=Array.prototype.slice.call(arguments),t=e[0],e=e.slice(1),n=Date.now();(!m||b<n-g)&&(m=we(),_e("session_start",{})),sessionStorage.setItem("ga_session_id",m),sessionStorage.setItem("ga_last_activity",n.toString()),g=n,"js"!==t&&("config"===t?_e("page_view",{page_location:window.location.href,page_title:document.title}):"event"===t&&_e(e[0],e[1]))},Te.prototype={on:function(e,t,n){var a;return D(e)?e.forEach(function(e){He(e,t,n)}):((a=this.e||(this.e={}))[e]||(a[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var a=this;function r(){a.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=je(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),a=0,r=n.length;a<r;a++)n[a].fn.apply(n[a].ctx,t);return this},off:function(e,t){if(D(e))e.forEach(function(e){Ce(e,t,ctx)});else{var n=this.e||(this.e={}),a=n[e],r=[];if(a&&t)for(var i=0,o=a.length;i<o;i++)a[i].fn!==t&&a[i].fn._!==t&&r.push(a[i]);r.length?n[e]=r:delete n[e]}return this}};function H(){F.emit.apply(F,arguments)}var Le,C,j,Ae,Ie,O,Se,Ee,Me,qe,Ne,F=new Te,He=function(){F.on.apply(F,arguments)},Ce=function(){F.off.apply(F,arguments)};function je(e,t){return t=t||0,Array.prototype.slice.call(e,t)}function Oe(e,t,n){return n=e.nextElementSibling,1<(t=t||1)?Oe(n,--t):n}function Fe(e,t,n){return n=e.previousElementSibling,1<(t=t||1)?Fe(n,--t):n}function De(e,t){K(e).insertBefore(t,e)}function Pe(e,t,n){(n=Oe(e))?De(n,t):B(K(e),t)}function D(e){return e instanceof Array}function ze(e){return"string"==typeof e}function Be(e){for(;Xe(e);)Je(Xe(e))}function P(e,t,n,a){a=(a=a||document).createElement(e);return t&&Q(a,t),Re(a,n),a}function z(e,t,n){return e?(e=e.cloneNode(!0),t&&Q(e,t),Re(e,n),e):0}function Re(e,t){if(t){D(t)||(t=[t]),D(t)||(t=[t]),Le=Le||z(bt);for(var n=0,a=t.length;n<a;n++)if(ze(t[n]))for(Le.innerHTML=t[n];Xe(Le);)B(e,Xe(Le));else B(e,t[n])}}function Ue(e){var t=(new DOMParser).parseFromString(e,"text/html");return B(e=document.createDocumentFragment(),je(t.body.childNodes)),e}function B(e,t){for(var n=0,a=(t=D(t)?t:[t]).length;n<a;n++)t[n]&&(ze(t[n])&&(t[n]=dt(t[n])),e.appendChild(t[n]))}function Je(e,t){(t=K(e))&&t.removeChild(e)}function Xe(e){return e.firstChild}function $e(e,t,n,a,r){a=R(e,function(){r||(a(),t.apply(null,arguments))},n,{passive:!0,once:!0})}function R(a,r,n,i){try{return n=n||document,-1===i&&(i={passive:!0,once:!0}),D(a)?V(a,function(e,t){R(t,r,n,i)}):V(n=D(n)||n instanceof NodeList?n:[n],function(e,t,n){if(y)n=-1!==["touchstart"].indexOf(a),t.addEventListener(a,r,n?Object.assign({passive:!0},i||{}):i||!1);else if(t.attachEvent)"DOMContentLoaded"===a&&(a="load",t=window),t.attachEvent("on"+a,r);else try{t["on"+a]=r}catch(e){}}),function(){return function n(a,r,i){i=i||_,D(a)?V(a,function(e,t){n(t,r,i)}):V(i=D(i)||i instanceof NodeList?i:[i],function(e,t){y?t.removeEventListener(a,r,!1):i.attachEvent&&t.detachEvent("on"+a,r)})}(a,r,n)}}catch(e){ke(e)}}function Ye(e,t,n,a){if(void 0===t&&(t=e?20:0),-1===e){var r=_.location.hash.split("#")[1];if(r&&!(e=_.getElementById(r)))return}a=e?e.getBoundingClientRect().top-t+w.scrollY:t,n&&"object"==typeof n||(n={behavior:"smooth"}),w.scrollTo(Object.assign({left:0,top:a},n))}function U(e,t,n,a){a=!1;for(var r=0,i=(t=D(t)?t:[t]).length;r<i;r++)if(e.classList.contains(t[r])){if(a=!0,n)return a}else if(!n)return!1;return a}function J(e,t,n){for(var a,r=0,i=(t=D(t)?t:[t]).length;r<i;r++)a=t[r],n?e.classList.remove(a):e.classList.add(a)}function D(e){return e instanceof Array}function f(e,t,n){!t&&""!==t||(e.innerHTML=t),isNaN(n)?e.removeAttribute("data-index",n):e.setAttribute("data-index",n)}function X(e,t,n){return"link"===e.type&&e.chapterTitle?e.chapterTitle:(n=e.chapterTitle||e.innerHTML,!1!==t&&e.chapterIndex?e.chapterIndex+" "+n:n)}function Qe(e,t){return t=!!e&&parseInt(e.getAttribute("data-index")),!isNaN(t)&&t}function Ke(e,t){var n;$(!1),e="object"==typeof e?Qe(e):e,isNaN(e)||!1===e||(Ie&&clearTimeout(Ie),O&&(O(),O=!1),t=L[e],(e=(Z=t).readerInfo)&&e.expand&&(n=W(e.expand))&&(vt(n,!0),e.expand=!1),Ve(t),G=!0,O=R("scroll",function(e){Ie&&clearTimeout(Ie),Ie=setTimeout(function(){G=!1,O(),O=!1},1e3)},w),Ye(t,80),n=t.chapterTitleText||t.innerText,w.history&&w.history.pushState("",n,_.location.pathname+"#"+t.id),_.title=n)}function We(){var a=null,r=Number.MAX_VALUE;L.forEach(function(e){var t=e.getBoundingClientRect(),n=window.innerHeight-t.bottom;t.top<window.innerHeight&&n<r&&(a=e,r=n)}),Ve(a)}function Ve(s){Se&&clearTimeout(Se),Se=setTimeout(function(){s?(l=L.slice(L.indexOf(s)+1).shift(),u=L.slice(0,L.indexOf(s)).pop(),n=s.classList.contains("subchapter")||"link"===s.type||s.readerInfo&&s.readerInfo.subchapter?(t=s,e=L.lastIndexOf(t),L.slice(0,e).filter(function(e){return!(!e.readerInfo||!e.readerInfo.chapter)||e.classList.contains("chapter")}).pop()):s):u=l=!1,n&&(a=n.id),t&&(r=t.id),u&&(i=u.id),l&&(o=l.id);var t,e,n,a,r,i,o,c=(c=t?t.index:!!n&&n.index)&&parseInt(c);requestAnimationFrame(function(){de.forEach(function(e,t){t=parseInt(e.getAttribute("data-index")),c===t?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")})}),d.chapter===a&&d.subchapter===r&&d.prev===i&&d.next===o||(d.chapter=!!n&&n.id,d.subchapter=!!t&&t.id,d.prev=!!u&&u.id,d.next=!!l&&l.id,requestAnimationFrame(function(){var e;n?(f(oe,X(n),n.index),t?(f(ce,X(t),t.index),ie.classList.remove("no-subchapter")):(f(ce),ie.classList.add("no-subchapter"))):(oe.innerHTML=ae,f(oe,ae),f(ce),ie.classList.add("no-subchapter"),l=L[0]),u?(E.setAttribute("title",u.innerText),f(E,!1,L.indexOf(u)),E.href="#"+(u.id||""),S.classList.remove("no-prev")):(f(E),E.href="#",S.classList.add("no-prev")),l?(M.setAttribute("title",l.innerText),f(M,!1,L.indexOf(l)),M.href="#"+(l.id||""),S.classList.remove("no-next"),l.classList.contains("subchapter")||"link"===l.type?(e=L.lastIndexOf(l),(e=L.slice(0,e).filter(function(e){return!(!e.readerInfo||!e.readerInfo.chapter)||e.classList.contains("chapter")}).pop()).id===d.chapter?(f(se,""),S.classList.add("same-chapter")):(f(se,X(e),e.index),S.classList.remove("same-chapter")),f(le,X(l),l.index),S.classList.remove("no-subchapter")):(f(le,""),f(se,X(l),l.index),S.classList.add("no-subchapter"),S.classList.remove("same-chapter"))):(f(M),M.href="#",S.classList.add("no-next"))}))},10)}function Ge(){Ee||(Ee=1,$async("/css/all.min.css").then(function(){}))}function Ze(e,t){e&&!Me||(Me=!e,Ae?(T("event",e?"menu_close":"menu_open",{event_category:"menu",event_label:e?"Close menu":"Open menu"}),requestAnimationFrame(function(){e?N.classList.remove("noscroll"):(Ge(),N.classList.add("noscroll")),C.style.display=e?"none":"block",j.style.display=e?"none":"block",e||W(".layer",C).scrollTo(0,0),t&&t()})):t&&t())}function et(e){function t(){e.onclose&&e.onclose(),J(N,["noscroll","reader-win"],!0)}e=Object.assign({class:""},e),C||(C=W("#gdpr-w"),j=W("#gdpr-o")),C||((C=P("div")).id="gdpr-w",(j=P("div")).id="gdpr-o"),B(k,C),B(k,j),Ae||(Ae=!0,R("click",function(e){e.target===j&&t()},j),R("hashchange",function(e){t()},window)),Q(C,{class:"popup-w"+(e.class?" "+e.class:""),id:null}),Q(j,{class:"popup-o"+(e.class?" "+e.class:""),id:null});var n=W(".gdpr-i",C);return n&&Je(n),J(n=z(e.el),"gdpr-i"),n.removeAttribute("id"),B(C,n),R("click",function(e){t()},W(".close",C)),rt([C,j]),J(N,["noscroll","reader-win"]),{i:n,w:C,o:j}}function $(e,t,n,a){Ne=!1,requestAnimationFrame(function(){"lg"===e?(I.classList.toggle("show-lg"),I.classList.remove("show-index"),(n=I.classList.contains("show-lg"))&&T("event","show_languages",{event_category:"languages",event_label:"Show language menu"})):"index"===e?(I.classList.remove("show-lg"),I.classList.toggle("show-index"),(n=I.classList.contains("show-index"))&&((a=I.querySelector("li.active"))&&a.scrollIntoView({behavior:"smooth",block:"center"}),T("event","reader_show_index",{event_category:"reader_index",event_label:"Show index"}))):(I.classList.remove("show-lg"),I.classList.remove("show-index")),n&&(Ne=e),n&&"download_promo"!==e?_.documentElement.classList.add("reader-win"):_.documentElement.classList.remove("reader-win")})}function tt(n,e,t){e=new IntersectionObserver(function(e){V(e,function(e,t){n(t,t.target)})},e);return t&&nt(t,e),e}function nt(e,n,a){V(e=D(e)||e instanceof NodeList?e:[e],function(e,t){a?n.unobserve(t):n.observe(t)})}function at(){e||(e=P("img",{class:"moon",width:1,height:1}),(starbg=new Image).src=gt("/images/stars.png",starbg,function(){ot(k,{"background-image":"url("+starbg.src+")"})}),Q(e,{src:gt("/images/moon.png",e)}),B(k,e),setTimeout(function(){J(e,"move")},1e4),fe.setItem("stars","1"))}function rt(e,t,n){n=n||"";for(var a=0,r=(e=D(e)?e:[e]).length;a<r;a++)ot(e[a],{display:t?"none":n})}function it(e){rt(e,1)}function ot(n,e,a){V(e,function(e,t){lt(t)?n.style.removeProperty(e):n.style.setProperty(e,t,a?"":"important")})}function ct(){q?(J(W("#darkswitch .dark"),"active"),J(W("#darkswitch .light"),"active",!0),T("event","dark_on",{event_category:"dark_mode",event_label:"Dark on"})):(J(W("#darkswitch .light"),"active"),J(W("#darkswitch .dark"),"active",!0),T("event","dark_off",{event_category:"dark_mode",event_label:"Dark off"}))}function st(){r||(r=!0,console.log("dark theme"),q=!0,J(N,"dark"),ut(w.darkcss))}function lt(e){return void 0===e}async function ut(e,t){return(t=_.createElement("style")).styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.appendChild(dt(e)),requestAnimationFrame(function(){B(x,t)}),t}function dt(e,t){if(!t)return document.createTextNode(e);e.textContent=t}async function ft(e,n,t,a,r,i,o,c){var s;t=Y(e,"data-z"),c=U(e,"shape"),t?((r=!!q&&Y(e,"data-zd"))&&(t=r),s=ht(e,"data-z-nowebp"),(i=(i=(s?t:gt(t,e,function(e,t){n&&n(e,t)},!0))||"SRC_EMPTY")instanceof Promise?await i||"SRC_EMPTY":i)!==e.src&&(Q(e,{src:i}),c)&&ot(e,{"shape-outside":"url("+i+")"})):(r=function(){ot(e,{"background-image":"url("+i+")"}),J(e,"anim")},a=!!n,(t=Y(e,"data-anim"))&&(i="/images/anim/"+t+".webp",a?r():($e("load",r,t=new Image),t.src=i)))}function pt(e,t){requestAnimationFrame(function(){ft(e,t)})}function Y(e,t){return e?e.getAttribute(t):void 0}function ht(e,t){return!!e&&e.hasAttribute(t)}function Q(n,e,t){var a;if(D(n))for(var r=0,i=n.length;r<i;r++)Q(n[r],e);else ze(e)&&(a=e,(e={})[a]=t),V(e,function(e,t){null===t?function n(a,r){D(a)?V(a,function(e,t){n(a,r)}):V(r=D(r)?r:[r],function(e,t){a.removeAttribute(t)})}(n,e):n.setAttribute(e,t)})}function mt(e,n){return D(e)?(n=[],V(e,function(e,t){n.push(mt(t))}),Promise.all(n)):new Promise(e)}function gt(n,a,r,e,t,i){return v?(i=n.replace(xe,ye),a&&(a.src===i||a.webp_resolved&&a.webp_resolved===a.src?r&&requestAnimationFrame(function(){r(a.webp_error||null,n,a)}):($e("error",function(e,t){a.src=n,a.webp_resolved=n,a.webp_error=n,r&&r(e,n,a)},a),r&&$e("load",function(){a.webp_resolved=i,r(!1,n,a)},a))),i):e&&c?mt(function(e){p.push(function(){e(gt(n,a,r))})}):(r&&requestAnimationFrame(function(){r(!0,n,a)}),n)}function K(e,t,n){return n=e.parentElement,1<(t=t||1)?K(n,--t):n}function W(e,n,a,r){return n=n||document,D(e)?(r=[],V(e,function(e,t){r.push(W(t,n,a))}),r):a?n.querySelectorAll(e):n.querySelector(e)}function V(e,t){if(D(e))for(var n=0,a=e.length;n<a;n++)t(n,e[n]);else for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])}function vt(e,t){for(var n,a,r=e.parentElement;"BLOCKQUOTE"!==r.nodeName&&a<5;)a++,r=e.parentElement;(n="BLOCKQUOTE"===r.nodeName?r:n)&&(n.classList.add("expand"),t||Ye(n,120))}w.gdpr||(w.gdpr=function(e){e()}),He("dark",function(e,t,n,a){e?(q=!0,st(),at()):q=!1,ct(),w.matchMedia("(prefers-color-scheme: dark)").matches===q?fe.removeItem("dark"):fe.setItem("dark",q?"1":"0"),J(N,"dark",!q),(n=W("#dark"))&&(n.checked=q),V(W("img[data-d],img[data-zd]",!1,!0),function(e,t){pt(t)})}),w.webprw=gt;var bt=P("div");function yt(e){if(!n){if(lt(n)&&(a=Xe(z((a=W("#book-splash")).content)),Pe(W("#sub-nav"),a),(e=W("[data-template]",a,!0)).length&&V(e,function(e,t,n,a){(a=W(n=Y(t,"data-template")))?B(t,z(a.content)):t.innerHTML="template not found: "+n}),o=P("a",{class:"show-print",target:"_blank"},P("img")),(e=Array.from(W("[data-z],[data-print]",!1,!0))).length?(imgs=[],V(e,function(e,t,n,a,r,i){if(a=Y(t,"data-print"),"IFRAME"===t.nodeName||a){if(!(n=Y(t,"data-z"))&&!a)return function(){console.log.apply(console,je(arguments))}(t,"no src");if(U(i=K(t),"video-container")?J(i,"hide-print"):(J(t,"hide-print"),i=!1),a){try{a=JSON.parse(a)}catch(e){return}(a=ze(a)?{image:a}:a).url||(a.url=n)}else{if(!(a=n.match(me))||!a[1])return;a={url:"http://youtube.com/watch?v="+a[1],image:"https://img.youtube.com/vi/"+a[1]+"/0.jpg",classes:"youtube-print"}}r=z(o,{href:a.url}),a.classes&&J(r,a.classes),requestAnimationFrame(function(){Q(W("img",r),{src:a.image})}),Pe(i||t,r)}imgs.push(t)})):imgs=e,wt(imgs),s||(s={},V(["chapter-number","chapter-block","chapter-cover"],function(e,t,n){if(!(n=W("#book-"+t,a)))return ke("#book-"+t,a);s[t]=z(n),Q(s[t],{id:null,class:"book-"+t})})),n=!1),!ne)return console.info("ðŸ–¨ï¸","wait for reader index"),He("reader-setup-done",yt);n=!0,J(N,"book-print"),B(t=W(".book-toc .toc",a),z(ue,{id:null})),wt(!1,t),V(L,function(e,t,n,a,r,i,o,c){i=t.readerInfo,he.test(t.nodeName)&&t.chapterIndex&&(r=i.print||{},De(t,o=z(s["chapter-block"])),B(o,t),(c=Fe(o))&&"HR"===c.nodeName&&J(c,"hide-print"),i.chapter?J(o,"chapter"):i.subchapter&&J(o,"subchapter"),(lt(r.newpage)||r.newpage)&&(i.chapter||r.newpage)&&J(o,"newpage"),r.cover&&(n=z(s["chapter-cover"]),/^#/.test(r.cover)&&W(r.cover)?B(n,z(W(r.cover).content)):B(n,Ue(r.cover)),De(t,n)),lt(r.chapter)||r.chapter)&&(B(W("span",a=z(s["chapter-number"])),dt(t.chapterIndex)),De(t,a))}),console.info("ðŸ–¨ï¸","book print mode enabled")}}function xt(){ge=w.innerHeight,ot(N,{"--maxheight":"calc("+ge+"px - 150px)"}),H("vp")}function wt(e,t){V(ee=e||Array.from(W("img[data-z]",t||!1,!0)),function(e,t){ft(t)})}w.epubExport=function(m,e,t,g,r){return mt(function(t,e){requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(function(d,f){function p(e){V(W("img",e,!0),function(e,t,n){n=z(f,{href:t.src.toString()}),Q(t,{src:n.href.toString()})})}function e(e,t){t=!!v,V(W("img[data-z]",e,!(v=!1)),function(e,t){ft(t),Q(t,{"data-z":null,"data-zd":null})}),v=!!t}f=P("a"),g=z(W("#main-content")),V(W("iframe,script,style,.video-container,.hide-print,.donate-big",g,!0),function(e,t){Je(t)}),p(g),e(g),V(W("[data-reader-info],[data-reader-link]",g,!0),function(e,t){Q(t,{"data-reader-info":null,"data-reader-link":null})});var h=[];m=z(W(".book-splash")),V(W(".chapter",m,!0),function(e,t,n,a,r,i,o,c,s,l){if((n=Y(W("a",t),"href"))&&-1!==n.indexOf("#")&&(r=n.toString().trim().replace(/^\#/,"")+".xhtml",Q(W("a",t),{href:r}),a=W(n,g))){for(o=Oe(a=U(K(a),"book-chapter-block")?K(a):a),B(i=P("div"),a);o&&!U(o,"chapter");)(U(o,"subchapter")||U(o,"reader-link"))&&(s=o.id,s=W(".subchapter",o)?W(".subchapter",o).id:s)&&(l=W('a[href*="#'+s+'"]',m))&&Q(l,{href:r+"#"+s}),c=Oe(o),B(i,o),o=c;var u;p(i),a=i,u=r,V(W('a.chapter-link,a[href*="'+_.location.pathname.split("#")[0]+'#"],a[href^="#"]',a,!0),function(e,t){if(U(t,"chapter-link")){var n=Y(t,"data-chapter-id");if(!W("#"+n))return;t.href="#"+n}d=z(f,{href:t.href}),Q(t,{href:u+"#"+t.href.split("#")[1]})}),h.push({title:W("span.text",t).innerHTML,content:i.innerHTML,filename:r,id:n})}}),V(W("li.active",m,!0),function(e,t){J(t,"active",!0)}),0<h.length&&(e(d=P("div",null,z(W("#footer")))),p(d),h[h.length-1].content+=d.innerHTML),V(d=W("template.epub",!(r=[]),!0),function(e,t,n,a){n=Y(t,"data-id"),r[n]=z(t.content).innerHTML}),Q(W(".reader-index",m),{id:"toc","epub:type":"toc"}),e(m),p(m),t({chapters:h,tocHTML:m.innerHTML,templates:r})})})})})},w.tocExport=function(o){return mt(function(s,i){requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(function(e,a){try{a=P("a");var t=W(".book-splash .book-toc > h1").innerText,n=z(W(".book-splash .toc"));if(!n)throw new Error(".toc not found");if(V(W("li.active",n,!0),function(e,t){J(t,"active",!0)}),V(W("a",n,!0),function(e,t){t.href&&Q(t,{href:t.href.toString()})}),r=!!v,V(W("img[data-z]",n,!(v=!1)),function(e,t){ft(t),Q(t,{"data-z":null,"data-zd":null})}),v=!!r,V(W("img",n,!0),function(e,t,n){n=z(a,{href:t.src.toString()}),Q(t,{src:n.href.toString()})}),o){let i=[],o=null;function c(e){var t,e=W("a",e);return{title:(t=W(".text",e))?t.textContent:"",number:(t=W(".num",e,!0),Array.from(t).map(e=>e.textContent).join("").replace(/\.$/,"")),id:e.href.split("#")[1]||""}}V(W("li",n,!0),function(e,t){if(t.classList.contains("chapter"))o=c(t),i.push(o);else if(t.classList.contains("subchapter")){var n=c(t),a=(t=t.className.split(" ").find(e=>e.startsWith("l")))?parseInt(t.substring(1)):0;if(a){var r=o;o.children||(o.children=[]);let t=o.children;for(let e=2;e<a&&(r=t[t.length-1]);e++)r.children||(r.children=[]),t=r.children;t&&t.push(n)}else o&&(o.children||(o.children=[]),o.children.push(n))}}),s({title:t,toc:i})}else s({title:t,toc:n.innerHTML})}catch(e){return i(e)}var r})})})})},R(["resize","orientationchange"],function(e){xt()},w);var _t,kt,Tt={scroll:!1,time:!1},Lt=R("scroll",function(e){Tt.scroll||(Tt.scroll=!0,Lt())},w),At=(setTimeout(function(){},3e3),He("read-status",function(e){Tt[e]=!0}),w.resolveImgs=function(){return mt(function(e,t,n,a){var r=[];V(W("img[data-z]",!1,!0),function(e,t,n){t.webp_resolved&&!t.complete&&r.push(mt(function(t,e){$e(["load","error"],function(e){t()},target,n)}))}),r.length?(a=setTimeout(function(){n||(n=!0,e())},1e4),Promise.all(r).then(function(){a&&clearTimeout(a),n||(n=!0,e())})):e()})},[]);async function It(){var e,t;return kt||(e=W(".backups li[data-pdfsrc]",!1,!0),t=[],V(e,(r,i)=>{t.push((async()=>{var a,n=Y(i,"data-pdfsrc");if(n){n=JSON.parse(n),At[r]={src:n,loading:!0};let t;try{t=(a=n[0],await new Promise((e,t)=>{var n=document.createElement("script");n.src=a+"up.js",n.async=!0,n.crossOrigin="anonymous",n.onerror=()=>{e(!1)},n.onload=()=>{window.pdfUp&&window.pdfUp.includes(a)?e(!0):e(!1)},document.body.appendChild(n)}))}catch(e){t=-1}let e;At[r].up=t,At[r].loading=!1,statsCode=-1===t?(e="ðŸŸ¡","unknown"):t?(e="ðŸŸ¢","up"):(e="ðŸ”´","down");n=W(".status .e",i);n.innerHTML=e,J(n,"loading",!0)}})())}),await Promise.all(t),kt=!0),At}w.commentSubmit=function(e){W("#comment-form").submit()},R(),-1!==document.cookie.indexOf("ebook-pdf-printer=")&&(A=!0),function e(t){"complete"===(state=_.readyState)||"interactive"===state?t():requestAnimationFrame(function(){e(t)})}(function(){var n,a,r;k=_.body,T("js",new Date),T("config",pe),A&&wt(),xt(),tt(function(e,t){e.isIntersecting&&!n&&(A||($async("/css/comment.css"),function(t){if(_t)t();else{if(!1===_t)return He("recaptcha",function(){t()});_t=!1,$async("https://www.google.com/recaptcha/api.js?render=explicit").then(function(e){e=setInterval(function(){grecaptcha&&(_t=!0,e)&&(clearTimeout(e),grecaptcha.ready(function(){t(),H("recaptcha")}))},0)})}}(function(e){V(W("form.comment .g-recaptcha",!1,!0),function(e,t,n,a){n=Y(t,"data-sitekey"),Y(t,"data-callback"),grecaptcha.render(t,{sitekey:n,callback:function(){W("#comment-form").submit()}})})})),n=!0)},{threshold:0,rootMargin:"0px"},W("#comment-form",!1,!0)),requestAnimationFrame(function(){"#comment-form"===_.location.hash&&Ye(-1,80)});try{(q=!!lt(q=U(N,"dark"))||q)&&(st(),at()),ct()}catch(e){console.error(e)}R("change",function(e){console.log("dark mode change",e.matches),H("dark",!!e.matches)},ve),R("click",function(e){H("dark",!q)},W("#darkswitch > span")),A||(a=tt(function(e,t){e.isIntersecting&&(pt(t),a.unobserve(t),ee=ee.filter(function(e){return t!==e}))},{threshold:0,rootMargin:"0px"},ee=Array.from(W("[data-z],[data-anim]",!1,!0))),He("i",function(e){V(e=D(e)?e:[e],function(e,t){nt(t,a),ee.push(t)})}),tt(function(e,t){!e.isIntersecting||A||r||(r=!0,$async("https://platform.twitter.com/widgets.js"))},{threshold:0,rootMargin:"0px"},W(".twitter-tweet",!1,!0)));var e,t,i,o,c=_.getElementById("menubtn"),s=(c&&R("click",function(e){var t=et({el:W("#menucon"),class:"menu",onclose:function(){Ze(!0)}});V(W("img[data-z], [data-anim]",t.i,!0),function(e,t){pt(t)}),Ze()},c),W("form.donate")),l=(s&&R("submit",function(e){""==s.querySelector("input").value&&(e.preventDefault(),alert("Please enter an e-mail address..."),s.querySelector("input").focus())},s),W("#download-links")),c=(l&&((e=Y(l,"data-pdfsrc"))&&(e=JSON.parse(e),(async()=>{if("/"===e[1].substr(0,1)){let n=W('a[rel="A4"]',l),e=await new Promise((t,e)=>{fetch(n.href,{method:"HEAD"}).then(e=>{e.ok&&("application/pdf"===e.headers.get("Content-Type")||"application/octet-stream"===e.headers.get("Content-Type")&&1024<parseInt(e.headers.get("Content-Length")))?t(!0):(console.warn("Local PDF source down",e.status,e),t(!1))}).catch(e=>{console.warn("Local PDF source down",e),t(!1)})});if(!e){let e=await It(),t;V(e,function(e,n){n.up&&!t&&(t=!0,console.info("PDF mirror",n.src[0]),V(W("a[data-file]",l,!0),function(e,t){Q(t,{href:n.src[1]+Y(t,"data-file"),target:"_blank",rel:"noopener"})}))}),t||console.warn("No PDF mirror available",e)}}})()),function(){F.once.apply(F,arguments)}("mirrors",function(){It()})),W(".backups",!1,!0)),c=(c.length&&V(c,function(e,t){var n=W("a.toggle",t),a=U(t,"footer");n&&R(a?["click","mouseover"]:"click",function(e){e.preventDefault(),J(t,"open"),a?requestAnimationFrame(function(){t.scrollIntoView()}):H("mirrors")},n)}),W(".video-container [data-video]",!1,!0)),c=(c.length&&(R("click",function(e,t,n,a,r){for(e.preventDefault(),n=Y(t=e.target,"data-video");t&&!n;)n=Y(t=K(t),"data-video");J(K(t),"playing"),r={width:720,height:405,src:"https://www.youtube.com/embed/"+(n=JSON.parse(Y(t,"data-video"))).id+"?autoplay=1",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0},a=P("iframe",r=n.attrs?Object.assign(r,n.attrs):r),K(e=t).replaceChild(a,e)},c),V(c,function(e,t,n){J(K(t),"imgplay")})),w.IntersectionObserver&&(c=W("#sub-nav"),new w.IntersectionObserver(function(e){e=e[0];e.target.classList.toggle("isSticky",e.intersectionRatio<1)},{threshold:[1],rootMargin:"-1px 0px 0px 0px"}).observe(c)),W('meta[http-equiv="content-language"]'),W("blockquote .expandlink",!1,!0)),c=(c&&c.length&&c.forEach(function(t){R("click",function(e){e.preventDefault(),vt(t)},t);var e=t.getAttribute("data-hash");e&&_.location.hash&&_.location.hash.split("#")[1]===e&&vt(t)}),W(".rightsnature")),c=(c&&(c.onclick=function(){T("event","newsletter_rightsfornature",{event_category:"newsletter",event_label:"Newsletter Rights for Nature"})}),W('a[target="_blank"]',!1,!0)),c=(c&&c.length&&R("click",function(e){T("event","ext_link",{event_category:el.classList.contains("quote")?"quote":"other",event_label:el.href})},c),W("p.donate a",!1,!0));c&&c.length&&_.getElementById("donate")&&(R("click",function(e){e.preventDefault(!0),Ye(_.getElementById("donate"),80),T("event","donate_button",{event_category:"donate",event_label:"Donate Button"})},c),W("form.donate input").onfocus=W("form.donate input").onkeypress=function(e){t&&clearTimeout(t),t=setTimeout(function(){T("event","donate_form_entry",{event_category:"donate",event_label:"Donate Form Email Entry"})},1e3)}),R(["beforeprint","afterprint"],function(e){H("print",!("afterprint"===e.type))},w);var u,c=w.matchMedia("print"),c=(R("change",function(e){H("print",!!e.matches)},c),He("print",function(e,t){if(e){if(A=!0,ut(`@font-face {
  font-display: swap;
  font-family: 'Noto Color Emoji';
  font-style: normal;
  font-weight: 400;
  src: local('Noto Color Emoji'), 
        url('/fonts/noto-color-emoji-v30-emoji-regular.woff2') format('woff2'),
       url('/fonts/noto-color-emoji-v30-emoji-regular.ttf') format('truetype');
}`),o)return;o=!0,yt(),i=q,H("dark",!1),console.info("ðŸ–¨ï¸","print view enabled")}else{if((A=!1)===o)return;o=!1,H("dark",q=i)}e=Array.from(W('a[href^="/"]',W("#main-content"),!0));e.length&&(imgs=[],V(e,function(e,t,n,a,r,i){A?(a=(n=Y(t,"href")).match(/^\/([^\/]+)\/(\#.*)?$/))&&a[1]!==window.articleSlug&&Q(t,{"data-href":n,href:"/download/"+a[1]+".html"}):(n=Y(t,"data-href"))&&Q(t,{href:n})}))}),c.matches&&H("print",!0),te=W("#reader"),I=W(".reader-container"),_.body.appendChild(I),ae=te.getAttribute("data-foreword"),re=te.querySelector(".index-btn"),ie=te.querySelector(".status > .cur"),oe=ie.querySelector("span.chapter"),ce=ie.querySelector("span.subchapter"),S=te.querySelector(".status > .next"),E=S.querySelector("a.prev"),M=S.querySelector("a.next"),se=S.querySelector("span.chapter"),le=S.querySelector("span.subchapter"),ue=W("#reader-index"),R("click",function(e){e.preventDefault();var t=e.target===E?"prev":"next";e.target===E&&S.classList.contains("no-prev")||e.target===M&&S.classList.contains("no-next")||(Ke(e.target),T("event","reader_"+t,{event_category:"reader_nav",event_label:t+" nav"}))},[E,M]),W(".reader-index .ebook-download")),d=(R("click",function(e,t){e.preventDefault();e=W("#download");document.location.href=e.href},[W("button",c),W("input",c)]),ebook_download_setup=!1,Array.from(W(".reader-index,.download-index",I,!0))),c=(R("click",function(e){var t=e.target;if(t){if(-1===d.indexOf(t)&&!U(t,"reader-container"))for(;t!==k;){if(U(t,"reader-container")||U(t,"popup-w"))return;if(!(t=K(t)))return}$(!1)}},k),R("click",function(e){e.preventDefault(),e.stopPropagation(),$("index"),u||(wt(),u=!0)},re),W("#select-lg")),c=(c&&R("click",function(e){e.preventDefault(),e.stopPropagation(),$("lg")},c),W("#show-social")),f=(c&&R("click",function(e){e.preventDefault(),e.stopPropagation(),Ge(),function t(n){T("event",n?"social_close":"social_open",{event_category:"social",event_label:n?"Close social share":"Open social share"}),$(!1),Ge(),requestAnimationFrame(function(){var e;n?(J(N,["noscroll","reader-win"],!0),it([C,j])):(e=et({el:W("#social-popup"),class:"social-popup light-o",onclose:function(){t(!0)}}),W(".layer",C).scrollTo(0,0),V(W("img[data-z], [data-anim]",e.i,!0),function(e,t){pt(t)}))})}()},c),W("#main-content")),c=(f&&R("click",function(e){for(var t=e.target;t&&"CITE"!==t.nodeName;){if(t===f||t===document.body)return;t=K(t)}t&&(e.preventDefault(),e.stopPropagation(),function d(f,p){T("event",p?"cite_close":"cite_open",{event_category:"cite",event_label:p?"Close citation":"Open citation"}),$(!1);for(var i,o,e,t=Y(f,"rel"),h=(void 0===qe&&(e=W("#citations"),qe=!!e&&JSON.parse(e.textContent)),{}),m=(qe&&qe[t]&&(h=qe[t]),K(f));m&&"P"!==m.nodeName;)(m=K(m))===document.body&&(m=!1);h.context||((e=Y(f,"rel"))?(i=[],V(e=e.split(","),function(e,t){if("p"===t)o=!0;else{var n=t.match(/^(next|prev)(\d+)?$/);if(n){o=!0;var a=1;for(n[2]&&!isNaN(n[2])&&(a=parseInt(n[2])),e=0;e<a;e++){var r=("next"===n[1]?Oe:Fe)(m,e+1);r&&i.push(r.innerText)}}}o&&i.unshift(m.innerText),h.context=i.length?i.join("\n"):"chapter"})):h.context="chapter"),h.text||(h.text=Y(W("#citations"),"data-default-desc").replace("[CITE]",f.innerText)),requestAnimationFrame(function(){if(p)J(N,["noscroll","reader-win"],!0),it([C,j]);else{var e,t=et({el:W("#cite-popup"),class:"cite-popup light-o",onclose:function(){d(f,!0)}}),n=W(".layer",C),a=W(".desc",n);switch(n.scrollTo(0,0),Be(a),h.title&&B(a,P("h3",!1,h.title)),h.context){case"p":e=m.innerText;break;case"chapter":for(var r=Fe(m);r&&!U(r,["chapter","subchapter"],!0);)r=Fe(r);var i=[];if(r){i.push(z(r).innerText);for(var o=Oe(r);o&&!U(o,["chapter","subchapter"],!0);){var c,s=z(o).innerText;o.classList.contains("quote")&&(c="A"!==(c=o).nodeName?W("a",o):c)&&(s="# "+W(".title",c).innerText,s=(s+="\n"+W(".title",c).innerText)+"\n"+c.href),i.push(s),o=Oe(o)}}e=i.join("\n");break;default:e=h.context}h.extra_context&&(e+="\n"+h.extra_context);var l=(l=h.prompt)||(l=Y(W("#citations"),"data-default-prompt")).replace("[URL]",document.location.href).replace("[CONTEXT]",e).replace("[QUERY]",f.innerText),u=(h.extra_prompt&&(l+="\n"+h.extra_prompt),encodeURIComponent(l));B(a,P("p",{},h.text)),V(W("a",W(".buttons",n),!0),function(e,n){switch(Y(n,"data-ref")){case"chatgpt":n.href="https://chatgpt.com/?q="+u;break;case"perplexity":n.href="https://perplexity.ai/?q="+u;break;case"you":var t=h.model||"claude_3_5_sonnet";n.href="https://you.com/search?tbm=youchat&cfr=chat&chatMode="+t+"&q="+u;break;case"prompt":R("click",function(t){t.preventDefault();t=P("textarea");t.value=l,B(document.body,t),t.select();try{document.execCommand("copy"),document.body.removeChild(t),ht(n,"data-text")||Q(n,{"data-text":n.innerHTML}),n.innerHTML="âœ…",setTimeout(function(){n.innerHTML=Y(n,"data-text")},2e3)}catch(e){Be(a),B(a,t)}},n)}}),V(W("img[data-z], [data-anim]",t.i,!0),function(e,t){pt(t)})}})}(t))},f),W(".main")),p=[".reader-link"];if(["h1","h2","h3","h4","h5","p"].forEach(function(e){p.push(e+".chapter,"+e+".subchapter")}),U(k,"no-reader"))L=[];else{if(0===(L=Array.from(c.querySelectorAll(p.join(",")))).length){var h=1,m=c.querySelectorAll("h1.bighead");if(0===m.length&&(h=2,m=c.querySelectorAll("h2.bighead")),0===m.length&&(h=3,m=c.querySelectorAll("h3.bighead")),0<m.length){hbig=Array.from(c.querySelectorAll(".bighead")),m=Array.from(m),h1first=hbig.indexOf(m[0]);for(var g=[],v=1;v<=5;v++)v<=h||g.push("h"+v+".bighead");g.length&&(h2big=c.querySelectorAll(g.join(","))),m.forEach(function(e){e.classList.add("chapter")}),h2big.length&&(h2big=Array.from(h2big)).forEach(function(e){var t=hbig.indexOf(e);e.classList.add(t<h1first?"chapter":"subchapter")})}L=Array.from(c.querySelectorAll(p.join(",")))}R("click",function(e,t,n){for(e.preventDefault(),t=e.target;"A"!==t.nodeName;)t=t.parentElement;(n=W(t.getAttribute("data-chapter-link")))&&(Ke(n),T("event","reader_link_"+n.id,{event_category:"reader_link_selection",event_label:X(n)}))},c.querySelectorAll("[data-chapter-link]"))}if(0===L.length)J(te,"nochapters");else{var b,m=_.documentElement.getAttribute("lang");try{b=new Intl.NumberFormat(m,{minimumFractionDigits:0,maximumFractionDigits:0})}catch(e){}var y=_.createElement("li"),c=_.createElement("a"),m=_.createElement("span"),x=_.createElement("span");J(m,"num"),x.classList.add("text"),c.appendChild(m),c.appendChild(x),y.appendChild(c),requestAnimationFrame(function(){for(var t,e,n,a,r,i,o,c,s,l,u,d=[],f=0,p={},h=0,m=L.length;h<m;h++){if((tag=L[h]).id||(tag.id="_h"+h),tag.type=!1,tag.index=h,tag.setAttribute("data-index",h),u=c=s=!1,i=tag.classList.contains("chapter")?(d=[[++f,0]],o=!(r=!0)):(r=!1,o=(o=tag.getAttribute("data-level"))&&parseInt(o),tag.classList.contains("subchapter")),e=(t=y.cloneNode(!0)).querySelector("a"),n=e.querySelector("span.num"),a=e.querySelector("span.text"),tag.classList.contains("reader-link")){s=!0;try{c=JSON.parse(tag.getAttribute("data-reader-link"))}catch(e){console.error(e);continue}c.level&&(o=c.level),c.classes&&(u=c.classes instanceof Array?c.classes:[c.classes]),a.innerHTML=c.title||tag.innerHTML,c.chapter?(tag.readerInfo=c,a.innerHTML=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+(c.title||tag.innerHTML),tag.chapterTitle=a.innerHTML,o=!(r=!(s=!(d=[[++f,0]])))):c.subchapter?(i=!0,tag.readerInfo=c,a.innerHTML=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+(c.title||tag.innerHTML),tag.chapterTitle=a.innerHTML,s=!1):(t.classList.add("reader-link"),tag.readerInfo=c,tag.type="link",tag.chapterTitle=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+" "+a.innerHTML)}else{if(tag.hasAttribute("data-reader-info"))try{c=JSON.parse(tag.getAttribute("data-reader-info"))}catch(e){console.error(e);continue}c?(c.level&&(o=c.level),tag.readerInfo=c,a.innerHTML=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+(c.title||tag.innerHTML),tag.chapterTitle=a.innerHTML,c.classes&&(u=c.classes instanceof Array?c.classes:[c.classes])):(tag.chapterTitle=tag.innerHTML,a.innerHTML=tag.innerHTML)}var g=_.createElement("div");if(g.innerHTML=tag.chapterTitle,tag.chapterTitleText=tag.readerInfo&&tag.readerInfo.titleText?tag.readerInfo.titleText:g.innerText,tag.readerInfo&&tag.readerInfo.indexTitle&&(a.innerHTML=c.indexTitle),tag.readerInfo&&tag.readerInfo.emoji_anim&&(ft(W("[data-anim]",g=z(bt,null,Ue(tag.chapterTitle))),!0),tag.chapterTitle=g.innerHTML),isNaN(o)||!1===o||o--,o<0&&(o=0),tag.readerInfo||(tag.readerInfo={}),tag.readerInfo.level=o,r||tag.readerInfo.chapter?tag.readerInfo.chapter=!0:(i||tag.readerInfo.subchapter)&&(tag.readerInfo.subchapter=i),r)t.classList.add("chapter"),n.innerHTML=(b?b.format(f):f)+".",tag.chapterIndex=n.innerHTML;else{if(void 0===d[o]&&(void 0===d[o-1]?(console.error("invalid parent",tag,d,o),d[o]=[-1,0]):d[o]=[d[o-1][1],0]),s)n.innerHTML="&nbsp;",J(a_num_sub=n.cloneNode(!0),"e"),a_num_sub.innerHTML=c.emoji||"ðŸ“Œ",c.emoji&&c.emoji_anim&&Q(a_num_sub,{"data-anim":c.emoji_anim}),n.parentNode.insertBefore(a_num_sub,n.nextSibling);else{for(;d[o+1];)d.pop();d[o][1]++,l=[],d.reverse().forEach(function(e){(a_num_sub=n.cloneNode(!0)).innerHTML=(b?b.format(e[1]):e[1])+".",n.parentNode.insertBefore(a_num_sub,n.nextSibling),l.push(a_num_sub.innerHTML)}),d.reverse(),n.innerHTML=(b?b.format(d[0][0]):d[0][0])+".",l.reverse(),l.unshift(n.innerHTML),tag.chapterIndex=l.join("")}t.classList.add("subchapter"),u&&u.forEach(function(e){t.classList.add(e)}),0<o&&t.classList.add("l"+(o+1))}Q(e,{"data-index":h,href:(p[tag.id]=tag).readerInfo&&tag.readerInfo.link?tag.readerInfo.link:"#"+tag.id}),ue.appendChild(t)}imgs=Array.from(W("img[data-d],img[data-z],img[data-zd],[data-anim]",ue,!0)),H("i",imgs);var v=Array.from(W("a.chapter-link",!1,!0));V(v,function(e,t,n,a,r){n=Y(t,"data-chapter-id"),(a=p[n])&&((r=W("span",t))&&(r.innerHTML=a.chapterIndex),Q(t,{"data-index":Y(a,"data-index"),title:a.chapterTitleText}))}),de=Array.from(ue.querySelectorAll("[data-index]")),_.location.hash&&function(){var n;try{if(!(n=W(_.location.hash.toString())))return;var e=Qe(n);if(isNaN(e)||!1===e)return;n=L[e]}catch(e){return console.error("hash",e)}function t(){var e,t=n.readerInfo;t&&t.expand&&(e=W(t.expand))&&(vt(e,!0),t.expand=!1),Ye(n,80,{})}wt();e=n.chapterTitleText||n.innerText;w.history&&w.history.replaceState("",e,_.location.pathname+"#"+n.id),_.title=e,t(),requestAnimationFrame(function(){t()}),setTimeout(function(){t()},1e3)}(),v.length&&R("click",function(e){for(var t=e.target;!t.classList.contains("chapter-link")&&"A"!==t.tagName;)t=t.parentElement;var n=Qe(t);isNaN(n)||!1===n||(e.preventDefault(),e=L[n],Ke(t),T("event","reader_chapter_link_"+e.id,{event_category:"reader_chapter_link",event_label:X(e)}))},v),R("click",function(e){e.preventDefault();for(var t=e.target;!t.classList.contains("reader-link")&&"A"!==t.tagName;)t=t.parentElement;var n,e=Qe(t);isNaN(e)||!1===e||((n=(e=L[e]).readerInfo)&&n.link?n.target&&"_blank"===n.target?w.open(n.link):_.location.href=n.link:(Ke(t),T("event","reader_index_"+e.id,{event_category:"reader_index_selection",event_label:X(e)})))},de),ne=!0,H("reader-setup-done")}),R("scroll",function(){var e=w.scrollY/(k.offsetHeight-w.innerHeight)*100;requestAnimationFrame(function(){ot(te,{"border-image-source":"linear-gradient(to right, var(--readerbarfill) "+e+"%, var(--readerbar) 0%)"})}),G||We()},window),R("wheel",function(e){Ie&&clearTimeout(Ie),O&&O(),G=!1},window),R("keydown",function(e){if(Ne){if("Escape"===event.key)return $(!1);var t;"index"===Ne&&(t=ue.parentElement,"ArrowUp"===event.key?t.scrollTop-=50:"ArrowDown"===event.key&&(t.scrollTop+=50))}},_),We(),R("keydown",function(e){if(-1!==["INPUT","TEXTAREA","SELECT"].indexOf(e.target.tagName)||e.altKey||e.ctrlKey)return!1;var t;37==e.keyCode?w.pageXOffset<=0&&(e.preventDefault(),0===(t=Qe(E))&&Z&&Qe(Z)===t?(Ye(),Z=!1):Ke(E)):39==e.keyCode&&_.body.scrollWidth-w.innerWidth<=w.pageXOffset&&(e.preventDefault(),Ke(M))},_)}A&&yt(),"#print"===_.location.hash&&$("download",0,!0)})}(window,document);