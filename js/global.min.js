!function(y,_){var v,K,w,l,u,W,k,V,a,t,s,n,o,T,G,Z,L,ee,te,ne,ae,re,A,I,S,ie,oe,ce,se,E,e,r,c,p,i,h,m,g,x,le=_.addEventListener,M=_.documentElement,ue=_.head,d={chapter:!1,subchapter:!1,prev:!1,next:!1},de="localStorage"in y&&y.localStorage,fe="G-ECMX8QNF81",pe=/^h[0-9]{1}$/i,he=/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?\/]{11})/,me=y.innerHeight,ge=y.matchMedia("(prefers-color-scheme: dark)"),ve=(ge.matches,navigator?navigator.userAgent:0),be=".webp",xe=/(\.(jp(e)?g|gif|bmp|png|tiff))/gi,b=!(!(ve&&(ve=ve.match(/.*\bChrome\/([0-9\.]+)|.*\bFirefox\/(\d+)\b.*/))&&(ve[1]||ve[2]&&65<=parseInt(ve[2])))&&(p=[],c=!0,(i=new Image).onload=i.onerror=function(){b=0<i.height,c=!1,PROCESS_CALLBACK_QUEUE(p,b)},i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"));function ye(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function _e(e,t){t=t||{};var n={client_id:h,session_id:m,non_personalized_ads:!0},a=new URLSearchParams,n=(Object.assign(a,n,t),a.append("en",e),a.append("_t",Date.now()),"https://www.google-analytics.com/g/collect?v=2&tid="+fe+"&"+a.toString());navigator.sendBeacon?navigator.sendBeacon(n):((t=new XMLHttpRequest).open("POST",n,!0),t.send())}function we(){console.error.apply(console,Ce(arguments))}function ke(){}h=de.getItem("ga_client_id")||ye(),de.setItem("ga_client_id",h),m=sessionStorage.getItem("ga_session_id"),g=parseInt(sessionStorage.getItem("ga_last_activity")||"0"),x=18e5,w=function(){var e=Array.prototype.slice.call(arguments),t=e[0],e=e.slice(1),n=Date.now();(!m||x<n-g)&&(m=ye(),_e("session_start",{})),sessionStorage.setItem("ga_session_id",m),sessionStorage.setItem("ga_last_activity",n.toString()),g=n,"js"!==t&&("config"===t?_e("page_view",{page_location:window.location.href,page_title:document.title}):"event"===t&&_e(e[0],e[1]))},ke.prototype={on:function(e,t,n){var a;return C(e)?e.forEach(function(e){He(e,t,n)}):((a=this.e||(this.e={}))[e]||(a[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var a=this;function r(){a.off(e,r),t.apply(n,arguments)}return r._=t,this.on(e,r,n)},emit:function(e){for(var t=Ce(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),a=0,r=n.length;a<r;a++)n[a].fn.apply(n[a].ctx,t);return this},off:function(e,t){if(C(e))e.forEach(function(e){je(e,t,ctx)});else{var n=this.e||(this.e={}),a=n[e],r=[];if(a&&t)for(var i=0,o=a.length;i<o;i++)a[i].fn!==t&&a[i].fn._!==t&&r.push(a[i]);r.length?n[e]=r:delete n[e]}return this}};function q(){Ne.emit.apply(Ne,arguments)}var Te,N,H,Le,Ae,j,Ie,Se,Ee,Me,qe,Ne=new ke,He=function(){Ne.on.apply(Ne,arguments)},je=function(){Ne.off.apply(Ne,arguments)};function Ce(e,t){return t=t||0,Array.prototype.slice.call(e,t)}function Oe(e,t,n){return n=e.nextElementSibling,1<(t=t||1)?Oe(n,--t):n}function Fe(e,t,n){return n=e.previousElementSibling,1<(t=t||1)?Fe(n,--t):n}function De(e,t){Y(e).insertBefore(t,e)}function ze(e,t,n){(n=Oe(e))?De(n,t):D(Y(e),t)}function C(e){return e instanceof Array}function Pe(e){return"string"==typeof e}function Be(e){for(;$e(e);)Xe($e(e))}function O(e,t,n,a){a=(a=a||document).createElement(e);return t&&$(a,t),Re(a,n),a}function F(e,t,n){return e?(e=e.cloneNode(!0),t&&$(e,t),Re(e,n),e):0}function Re(e,t){if(t){C(t)||(t=[t]),C(t)||(t=[t]),Te=Te||F(bt);for(var n=0,a=t.length;n<a;n++)if(Pe(t[n]))for(Te.innerHTML=t[n];$e(Te);)D(e,$e(Te));else D(e,t[n])}}function Ue(e){var t=(new DOMParser).parseFromString(e,"text/html");return D(e=document.createDocumentFragment(),Ce(t.body.childNodes)),e}function D(e,t){for(var n=0,a=(t=C(t)?t:[t]).length;n<a;n++)t[n]&&(Pe(t[n])&&(t[n]=dt(t[n])),e.appendChild(t[n]))}function Xe(e,t){(t=Y(e))&&t.removeChild(e)}function $e(e){return e.firstChild}function Ye(e,t,n,a,r){a=z(e,function(){r||(a(),t.apply(null,arguments))},n,{passive:!0,once:!0})}function z(a,r,n,i){try{return n=n||document,-1===i&&(i={passive:!0,once:!0}),C(a)?Q(a,function(e,t){z(t,r,n,i)}):Q(n=C(n)||n instanceof NodeList?n:[n],function(e,t,n){if(le)n=-1!==["touchstart"].indexOf(a),t.addEventListener(a,r,n?Object.assign({passive:!0},i||{}):i||!1);else if(t.attachEvent)"DOMContentLoaded"===a&&(a="load",t=window),t.attachEvent("on"+a,r);else try{t["on"+a]=r}catch(e){}}),function(){return function n(a,r,i){i=i||_,C(a)?Q(a,function(e,t){n(t,r,i)}):Q(i=C(i)||i instanceof NodeList?i:[i],function(e,t){le?t.removeEventListener(a,r,!1):i.attachEvent&&t.detachEvent("on"+a,r)})}(a,r,n)}}catch(e){we(e)}}function Je(e,t,n,a){if(void 0===t&&(t=e?20:0),-1===e){var r=_.location.hash.split("#")[1];if(r&&!(e=_.getElementById(r)))return}a=e?e.getBoundingClientRect().top-t+y.scrollY:t,n&&"object"==typeof n||(n={behavior:"smooth"}),y.scrollTo(Object.assign({left:0,top:a},n))}function P(e,t,n,a){a=!1;for(var r=0,i=(t=C(t)?t:[t]).length;r<i;r++)if(e.classList.contains(t[r])){if(a=!0,n)return a}else if(!n)return!1;return a}function B(e,t,n){for(var a,r=0,i=(t=C(t)?t:[t]).length;r<i;r++)a=t[r],n?e.classList.remove(a):e.classList.add(a)}function C(e){return e instanceof Array}function f(e,t,n){!t&&""!==t||(e.innerHTML=t),isNaN(n)?e.removeAttribute("data-index",n):e.setAttribute("data-index",n)}function R(e,t,n){return"link"===e.type&&e.chapterTitle?e.chapterTitle:(n=e.chapterTitle||e.innerHTML,!1!==t&&e.chapterIndex?e.chapterIndex+" "+n:n)}function Qe(e,t){return t=!!e&&parseInt(e.getAttribute("data-index")),!isNaN(t)&&t}function Ke(e,t){var n;U(!1),e="object"==typeof e?Qe(e):e,isNaN(e)||!1===e||(Ae&&clearTimeout(Ae),j&&(j(),j=!1),t=k[e],(e=(W=t).readerInfo)&&e.expand&&(n=J(e.expand))&&(vt(n,!0),e.expand=!1),Ve(t),K=!0,j=z("scroll",function(e){Ae&&clearTimeout(Ae),Ae=setTimeout(function(){K=!1,j(),j=!1},1e3)},y),Je(t,80),n=t.chapterTitleText||t.innerText,y.history&&y.history.pushState("",n,_.location.pathname+"#"+t.id),_.title=n)}function We(){var a=null,r=Number.MAX_VALUE;k.forEach(function(e){var t=e.getBoundingClientRect(),n=window.innerHeight-t.bottom;t.top<window.innerHeight&&n<r&&(a=e,r=n)}),Ve(a)}function Ve(s){Ie&&clearTimeout(Ie),Ie=setTimeout(function(){s?(l=k.slice(k.indexOf(s)+1).shift(),u=k.slice(0,k.indexOf(s)).pop(),n=s.classList.contains("subchapter")||"link"===s.type||s.readerInfo&&s.readerInfo.subchapter?(t=s,e=k.lastIndexOf(t),k.slice(0,e).filter(function(e){return!(!e.readerInfo||!e.readerInfo.chapter)||e.classList.contains("chapter")}).pop()):s):u=l=!1,n&&(a=n.id),t&&(r=t.id),u&&(i=u.id),l&&(o=l.id);var t,e,n,a,r,i,o,c=(c=t?t.index:!!n&&n.index)&&parseInt(c);requestAnimationFrame(function(){se.forEach(function(e,t){t=parseInt(e.getAttribute("data-index")),c===t?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")})}),d.chapter===a&&d.subchapter===r&&d.prev===i&&d.next===o||(d.chapter=!!n&&n.id,d.subchapter=!!t&&t.id,d.prev=!!u&&u.id,d.next=!!l&&l.id,requestAnimationFrame(function(){var e;n?(f(ae,R(n),n.index),t?(f(re,R(t),t.index),ne.classList.remove("no-subchapter")):(f(re),ne.classList.add("no-subchapter"))):(ae.innerHTML=ee,f(ae,ee),f(re),ne.classList.add("no-subchapter"),l=k[0]),u?(I.setAttribute("title",u.innerText),f(I,!1,k.indexOf(u)),I.href="#"+(u.id||""),A.classList.remove("no-prev")):(f(I),I.href="#",A.classList.add("no-prev")),l?(S.setAttribute("title",l.innerText),f(S,!1,k.indexOf(l)),S.href="#"+(l.id||""),A.classList.remove("no-next"),l.classList.contains("subchapter")||"link"===l.type?(e=k.lastIndexOf(l),(e=k.slice(0,e).filter(function(e){return!(!e.readerInfo||!e.readerInfo.chapter)||e.classList.contains("chapter")}).pop()).id===d.chapter?(f(ie,""),A.classList.add("same-chapter")):(f(ie,R(e),e.index),A.classList.remove("same-chapter")),f(oe,R(l),l.index),A.classList.remove("no-subchapter")):(f(oe,""),f(ie,R(l),l.index),A.classList.add("no-subchapter"),A.classList.remove("same-chapter"))):(f(S),S.href="#",A.classList.add("no-next"))}))},10)}function Ge(){Se||(Se=1,$async("/css/all.min.css").then(function(){}))}function Ze(e,t){e&&!Ee||(Ee=!e,Le?(w("event",e?"menu_close":"menu_open",{event_category:"menu",event_label:e?"Close menu":"Open menu"}),requestAnimationFrame(function(){e?M.classList.remove("noscroll"):(Ge(),M.classList.add("noscroll")),N.style.display=e?"none":"block",H.style.display=e?"none":"block",e||J(".layer",N).scrollTo(0,0),t&&t()})):t&&t())}function et(e){function t(){e.onclose&&e.onclose(),B(M,["noscroll","reader-win"],!0)}e=Object.assign({class:""},e),N||(N=J("#gdpr-w"),H=J("#gdpr-o")),N||((N=O("div")).id="gdpr-w",(H=O("div")).id="gdpr-o"),D(v,N),D(v,H),Le||(Le=!0,z("click",function(e){e.target===H&&t()},H),z("hashchange",function(e){t()},window)),$(N,{class:"popup-w"+(e.class?" "+e.class:""),id:null}),$(H,{class:"popup-o"+(e.class?" "+e.class:""),id:null});var n=J(".gdpr-i",N);return n&&Xe(n),B(n=F(e.el),"gdpr-i"),n.removeAttribute("id"),D(N,n),z("click",function(e){t()},J(".close",N)),rt([N,H]),B(M,["noscroll","reader-win"]),{i:n,w:N,o:H}}function U(e,t,n,a){qe=!1,requestAnimationFrame(function(){"lg"===e?(L.classList.toggle("show-lg"),L.classList.remove("show-index"),(n=L.classList.contains("show-lg"))&&w("event","show_languages",{event_category:"languages",event_label:"Show language menu"})):"index"===e?(L.classList.remove("show-lg"),L.classList.toggle("show-index"),(n=L.classList.contains("show-index"))&&((a=L.querySelector("li.active"))&&a.scrollIntoView({behavior:"smooth",block:"center"}),w("event","reader_show_index",{event_category:"reader_index",event_label:"Show index"}))):(L.classList.remove("show-lg"),L.classList.remove("show-index")),n&&(qe=e),n&&"download_promo"!==e?_.documentElement.classList.add("reader-win"):_.documentElement.classList.remove("reader-win")})}function tt(n,e,t){e=new IntersectionObserver(function(e){Q(e,function(e,t){n(t,t.target)})},e);return t&&nt(t,e),e}function nt(e,n,a){Q(e=C(e)||e instanceof NodeList?e:[e],function(e,t){a?n.unobserve(t):n.observe(t)})}function at(){e||(e=O("img",{class:"moon",width:1,height:1}),(starbg=new Image).src=gt("/images/stars.png",starbg,function(){ot(v,{"background-image":"url("+starbg.src+")"})}),$(e,{src:gt("/images/moon.png",e)}),D(v,e),setTimeout(function(){B(e,"move")},1e4),de.setItem("stars","1"))}function rt(e,t,n){n=n||"";for(var a=0,r=(e=C(e)?e:[e]).length;a<r;a++)ot(e[a],{display:t?"none":n})}function it(e){rt(e,1)}function ot(n,e,a){Q(e,function(e,t){lt(t)?n.style.removeProperty(e):n.style.setProperty(e,t,a?"":"important")})}function ct(){E?(B(J("#darkswitch .dark"),"active"),B(J("#darkswitch .light"),"active",!0),w("event","dark_on",{event_category:"dark_mode",event_label:"Dark on"})):(B(J("#darkswitch .light"),"active"),B(J("#darkswitch .dark"),"active",!0),w("event","dark_off",{event_category:"dark_mode",event_label:"Dark off"}))}function st(){r||(r=!0,console.log("dark theme"),E=!0,B(M,"dark"),ut(y.darkcss))}function lt(e){return void 0===e}async function ut(e,t){return(t=_.createElement("style")).styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.appendChild(dt(e)),requestAnimationFrame(function(){D(ue,t)}),t}function dt(e,t){if(!t)return document.createTextNode(e);e.textContent=t}async function ft(e,n,t,a,r,i,o,c){var s;t=X(e,"data-z"),c=P(e,"shape"),t?((r=!!E&&X(e,"data-zd"))&&(t=r),s=ht(e,"data-z-nowebp"),(i=(i=(s?t:gt(t,e,function(e,t){n&&n(e,t)},!0))||"SRC_EMPTY")instanceof Promise?await i||"SRC_EMPTY":i)!==e.src&&($(e,{src:i}),c)&&ot(e,{"shape-outside":"url("+i+")"})):(r=function(){ot(e,{"background-image":"url("+i+")"}),B(e,"anim")},a=!!n,(t=X(e,"data-anim"))&&(i="/images/anim/"+t+".webp",a?r():(Ye("load",r,t=new Image),t.src=i)))}function pt(e,t){requestAnimationFrame(function(){ft(e,t)})}function X(e,t){return e?e.getAttribute(t):void 0}function ht(e,t){return!!e&&e.hasAttribute(t)}function $(n,e,t){var a;if(C(n))for(var r=0,i=n.length;r<i;r++)$(n[r],e);else Pe(e)&&(a=e,(e={})[a]=t),Q(e,function(e,t){null===t?function n(a,r){C(a)?Q(a,function(e,t){n(a,r)}):Q(r=C(r)?r:[r],function(e,t){a.removeAttribute(t)})}(n,e):n.setAttribute(e,t)})}function mt(e,n){return C(e)?(n=[],Q(e,function(e,t){n.push(mt(t))}),Promise.all(n)):new Promise(e)}function gt(n,a,r,e,t,i){return b?(i=n.replace(xe,be),a&&(a.src===i||a.webp_resolved&&a.webp_resolved===a.src?r&&requestAnimationFrame(function(){r(a.webp_error||null,n,a)}):(Ye("error",function(e,t){a.src=n,a.webp_resolved=n,a.webp_error=n,r&&r(e,n,a)},a),r&&Ye("load",function(){a.webp_resolved=i,r(!1,n,a)},a))),i):e&&c?mt(function(e){p.push(function(){e(gt(n,a,r))})}):(r&&requestAnimationFrame(function(){r(!0,n,a)}),n)}function Y(e,t,n){return n=e.parentElement,1<(t=t||1)?Y(n,--t):n}function J(e,n,a,r){return n=n||document,C(e)?(r=[],Q(e,function(e,t){r.push(J(t,n,a))}),r):a?n.querySelectorAll(e):n.querySelector(e)}function Q(e,t){if(C(e))for(var n=0,a=e.length;n<a;n++)t(n,e[n]);else for(var r in e)e.hasOwnProperty(r)&&t(r,e[r])}function vt(e,t){for(var n,a,r=e.parentElement;"BLOCKQUOTE"!==r.nodeName&&a<5;)a++,r=e.parentElement;(n="BLOCKQUOTE"===r.nodeName?r:n)&&(n.classList.add("expand"),t||Je(n,120))}y.gdpr||(y.gdpr=function(e){e()}),He("dark",function(e,t,n,a){e?(E=!0,st(),at()):E=!1,ct(),y.matchMedia("(prefers-color-scheme: dark)").matches===E?de.removeItem("dark"):de.setItem("dark",E?"1":"0"),B(M,"dark",!E),(n=J("#dark"))&&(n.checked=E),Q(J("img[data-d],img[data-zd]",!1,!0),function(e,t){pt(t)})}),y.webprw=gt;var bt=O("div");function xt(e){if(!n){if(lt(n)&&(a=$e(F((a=J("#book-splash")).content)),ze(J("#sub-nav"),a),(e=J("[data-template]",a,!0)).length&&Q(e,function(e,t,n,a){(a=J(n=X(t,"data-template")))?D(t,F(a.content)):t.innerHTML="template not found: "+n}),o=O("a",{class:"show-print",target:"_blank"},O("img")),(e=Array.from(J("[data-z],[data-print]",!1,!0))).length?(imgs=[],Q(e,function(e,t,n,a,r,i){if(a=X(t,"data-print"),"IFRAME"===t.nodeName||a){if(!(n=X(t,"data-z"))&&!a)return function(){console.log.apply(console,Ce(arguments))}(t,"no src");if(P(i=Y(t),"video-container")?B(i,"hide-print"):(B(t,"hide-print"),i=!1),a){try{a=JSON.parse(a)}catch(e){return}(a=Pe(a)?{image:a}:a).url||(a.url=n)}else{if(!(a=n.match(he))||!a[1])return;a={url:"http://youtube.com/watch?v="+a[1],image:"https://img.youtube.com/vi/"+a[1]+"/0.jpg",classes:"youtube-print"}}r=F(o,{href:a.url}),a.classes&&B(r,a.classes),requestAnimationFrame(function(){$(J("img",r),{src:a.image})}),ze(i||t,r)}imgs.push(t)})):imgs=e,_t(imgs),s||(s={},Q(["chapter-number","chapter-block","chapter-cover"],function(e,t,n){if(!(n=J("#book-"+t,a)))return we("#book-"+t,a);s[t]=F(n),$(s[t],{id:null,class:"book-"+t})})),n=!1),!Z)return console.info("ðŸ–¨ï¸","wait for reader index"),He("reader-setup-done",xt);n=!0,B(M,"book-print"),D(t=J(".book-toc .toc",a),F(ce,{id:null})),_t(!1,t),Q(k,function(e,t,n,a,r,i,o,c){i=t.readerInfo,pe.test(t.nodeName)&&t.chapterIndex&&(r=i.print||{},De(t,o=F(s["chapter-block"])),D(o,t),(c=Fe(o))&&"HR"===c.nodeName&&B(c,"hide-print"),i.chapter?B(o,"chapter"):i.subchapter&&B(o,"subchapter"),(lt(r.newpage)||r.newpage)&&(i.chapter||r.newpage)&&B(o,"newpage"),r.cover&&(n=F(s["chapter-cover"]),/^#/.test(r.cover)&&J(r.cover)?D(n,F(J(r.cover).content)):D(n,Ue(r.cover)),De(t,n)),lt(r.chapter)||r.chapter)&&(D(J("span",a=F(s["chapter-number"])),dt(t.chapterIndex)),De(t,a))}),console.info("ðŸ–¨ï¸","book print mode enabled")}}function yt(){me=y.innerHeight,ot(M,{"--maxheight":"calc("+me+"px - 150px)"}),q("vp")}function _t(e,t){Q(V=e||Array.from(J("img[data-z]",t||!1,!0)),function(e,t){ft(t)})}y.epubExport=function(m,e,t,g,r){return mt(function(t,e){requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(function(d,f){function p(e){Q(J("img",e,!0),function(e,t,n){n=F(f,{href:t.src.toString()}),$(t,{src:n.href.toString()})})}function e(e,t){t=!!b,Q(J("img[data-z]",e,!(b=!1)),function(e,t){ft(t),$(t,{"data-z":null,"data-zd":null})}),b=!!t}f=O("a"),g=F(J("#main-content")),Q(J("iframe,script,style,.video-container,.hide-print,.donate-big",g,!0),function(e,t){Xe(t)}),p(g),e(g),Q(J("[data-reader-info],[data-reader-link]",g,!0),function(e,t){$(t,{"data-reader-info":null,"data-reader-link":null})});var h=[];m=F(J(".book-splash")),Q(J(".chapter",m,!0),function(e,t,n,a,r,i,o,c,s,l){if((n=X(J("a",t),"href"))&&-1!==n.indexOf("#")&&(r=n.toString().trim().replace(/^\#/,"")+".xhtml",$(J("a",t),{href:r}),a=J(n,g))){for(o=Oe(a=P(Y(a),"book-chapter-block")?Y(a):a),D(i=O("div"),a);o&&!P(o,"chapter");)(P(o,"subchapter")||P(o,"reader-link"))&&(s=o.id,s=J(".subchapter",o)?J(".subchapter",o).id:s)&&(l=J('a[href*="#'+s+'"]',m))&&$(l,{href:r+"#"+s}),c=Oe(o),D(i,o),o=c;var u;p(i),a=i,u=r,Q(J('a.chapter-link,a[href*="'+_.location.pathname.split("#")[0]+'#"],a[href^="#"]',a,!0),function(e,t){if(P(t,"chapter-link")){var n=X(t,"data-chapter-id");if(!J("#"+n))return;t.href="#"+n}d=F(f,{href:t.href}),$(t,{href:u+"#"+t.href.split("#")[1]})}),h.push({title:J("span.text",t).innerHTML,content:i.innerHTML,filename:r,id:n})}}),Q(J("li.active",m,!0),function(e,t){B(t,"active",!0)}),0<h.length&&(e(d=O("div",null,F(J("#footer")))),p(d),h[h.length-1].content+=d.innerHTML),Q(d=J("template.epub",!(r=[]),!0),function(e,t,n,a){n=X(t,"data-id"),r[n]=F(t.content).innerHTML}),$(J(".reader-index",m),{id:"toc","epub:type":"toc"}),e(m),p(m),t({chapters:h,tocHTML:m.innerHTML,templates:r})})})})})},y.tocExport=function(o){return mt(function(s,i){requestAnimationFrame(function(){requestAnimationFrame(function(){requestAnimationFrame(function(e,a){try{a=O("a");var t=J(".book-splash .book-toc > h1").innerText,n=F(J(".book-splash .toc"));if(!n)throw new Error(".toc not found");if(Q(J("li.active",n,!0),function(e,t){B(t,"active",!0)}),Q(J("a",n,!0),function(e,t){t.href&&$(t,{href:t.href.toString()})}),r=!!b,Q(J("img[data-z]",n,!(b=!1)),function(e,t){ft(t),$(t,{"data-z":null,"data-zd":null})}),b=!!r,Q(J("img",n,!0),function(e,t,n){n=F(a,{href:t.src.toString()}),$(t,{src:n.href.toString()})}),o){let i=[],o=null;function c(e){var t,e=J("a",e);return{title:(t=J(".text",e))?t.textContent:"",number:(t=J(".num",e,!0),Array.from(t).map(e=>e.textContent).join("").replace(/\.$/,"")),id:e.href.split("#")[1]||""}}Q(J("li",n,!0),function(e,t){if(t.classList.contains("chapter"))o=c(t),i.push(o);else if(t.classList.contains("subchapter")){var n=c(t),a=(t=t.className.split(" ").find(e=>e.startsWith("l")))?parseInt(t.substring(1)):0;if(a){var r=o;o.children||(o.children=[]);let t=o.children;for(let e=2;e<a&&(r=t[t.length-1]);e++)r.children||(r.children=[]),t=r.children;t&&t.push(n)}else o&&(o.children||(o.children=[]),o.children.push(n))}}),s({title:t,toc:i})}else s({title:t,toc:n.innerHTML})}catch(e){return i(e)}var r})})})})},z(["resize","orientationchange"],function(e){yt()},y);var wt,kt={scroll:!1,time:!1},Tt=z("scroll",function(e){kt.scroll||(kt.scroll=!0,Tt())},y);setTimeout(function(){},3e3),He("read-status",function(e){kt[e]=!0}),y.resolveImgs=function(){return mt(function(e,t,n,a){var r=[];Q(J("img[data-z]",!1,!0),function(e,t,n){t.webp_resolved&&!t.complete&&r.push(mt(function(t,e){Ye(["load","error"],function(e){t()},target,n)}))}),r.length?(a=setTimeout(function(){n||(n=!0,e())},1e4),Promise.all(r).then(function(){a&&clearTimeout(a),n||(n=!0,e())})):e()})},y.commentSubmit=function(e){J("#comment-form").submit()},z(),-1!==document.cookie.indexOf("ebook-pdf-printer=")&&(T=!0),function e(t){"complete"===(state=_.readyState)||"interactive"===state?t():requestAnimationFrame(function(){e(t)})}(function(){var n,a,r;v=_.body,w("js",new Date),w("config",fe),T&&_t(),yt(),tt(function(e,t){e.isIntersecting&&!n&&(T||($async("/css/comment.css"),function(t){if(wt)t();else{if(!1===wt)return He("recaptcha",function(){t()});wt=!1,$async("https://www.google.com/recaptcha/api.js?render=explicit").then(function(e){e=setInterval(function(){grecaptcha&&(wt=!0,e)&&(clearTimeout(e),grecaptcha.ready(function(){t(),q("recaptcha")}))},0)})}}(function(e){Q(J("form.comment .g-recaptcha",!1,!0),function(e,t,n,a){n=X(t,"data-sitekey"),X(t,"data-callback"),grecaptcha.render(t,{sitekey:n,callback:function(){J("#comment-form").submit()}})})})),n=!0)},{threshold:0,rootMargin:"0px"},J("#comment-form",!1,!0)),requestAnimationFrame(function(){"#comment-form"===_.location.hash&&Je(-1,80)});try{(E=!!lt(E=P(M,"dark"))||E)&&(st(),at()),ct()}catch(e){console.error(e)}z("change",function(e){console.log("dark mode change",e.matches),q("dark",!!e.matches)},ge),z("click",function(e){q("dark",!E)},J("#darkswitch > span")),T||(a=tt(function(e,t){e.isIntersecting&&(pt(t),a.unobserve(t),V=V.filter(function(e){return t!==e}))},{threshold:0,rootMargin:"0px"},V=Array.from(J("[data-z],[data-anim]",!1,!0))),He("i",function(e){Q(e=C(e)?e:[e],function(e,t){nt(t,a),V.push(t)})}),tt(function(e,t){!e.isIntersecting||T||r||(r=!0,$async("https://platform.twitter.com/widgets.js"))},{threshold:0,rootMargin:"0px"},J(".twitter-tweet",!1,!0)));var t,i,o,e=_.getElementById("menubtn"),c=(e&&z("click",function(e){var t=et({el:J("#menucon"),class:"menu",onclose:function(){Ze(!0)}});Q(J("img[data-z], [data-anim]",t.i,!0),function(e,t){pt(t)}),Ze()},e),J("form.donate")),e=(c&&z("submit",function(e){""==c.querySelector("input").value&&(e.preventDefault(),alert("Please enter an e-mail address..."),c.querySelector("input").focus())},c),J(".video-container [data-video]",!1,!0)),e=(e.length&&(z("click",function(e,t,n,a,r){for(e.preventDefault(),n=X(t=e.target,"data-video");t&&!n;)n=X(t=Y(t),"data-video");B(Y(t),"playing"),r={width:720,height:405,src:"https://www.youtube.com/embed/"+(n=JSON.parse(X(t,"data-video"))).id+"?autoplay=1",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0},a=O("iframe",r=n.attrs?Object.assign(r,n.attrs):r),Y(e=t).replaceChild(a,e)},e),Q(e,function(e,t,n){B(Y(t),"imgplay")})),y.IntersectionObserver&&(e=J("#sub-nav"),new y.IntersectionObserver(function(e){e=e[0];e.target.classList.toggle("isSticky",e.intersectionRatio<1)},{threshold:[1],rootMargin:"-1px 0px 0px 0px"}).observe(e)),J('meta[http-equiv="content-language"]'),J("blockquote .expandlink",!1,!0)),e=(e&&e.length&&e.forEach(function(t){z("click",function(e){e.preventDefault(),vt(t)},t);var e=t.getAttribute("data-hash");e&&_.location.hash&&_.location.hash.split("#")[1]===e&&vt(t)}),J(".rightsnature")),e=(e&&(e.onclick=function(){w("event","newsletter_rightsfornature",{event_category:"newsletter",event_label:"Newsletter Rights for Nature"})}),J('a[target="_blank"]',!1,!0)),e=(e&&e.length&&z("click",function(e){w("event","ext_link",{event_category:el.classList.contains("quote")?"quote":"other",event_label:el.href})},e),J("p.donate a",!1,!0));e&&e.length&&_.getElementById("donate")&&(z("click",function(e){e.preventDefault(!0),Je(_.getElementById("donate"),80),w("event","donate_button",{event_category:"donate",event_label:"Donate Button"})},e),J("form.donate input").onfocus=J("form.donate input").onkeypress=function(e){t&&clearTimeout(t),t=setTimeout(function(){w("event","donate_form_entry",{event_category:"donate",event_label:"Donate Form Email Entry"})},1e3)}),z(["beforeprint","afterprint"],function(e){q("print",!("afterprint"===e.type))},y);var s,e=y.matchMedia("print"),e=(z("change",function(e){q("print",!!e.matches)},e),He("print",function(e,t){if(e){if(T=!0,ut(`@font-face {
  font-display: swap;
  font-family: 'Noto Color Emoji';
  font-style: normal;
  font-weight: 400;
  src: local('Noto Color Emoji'), 
        url('/fonts/noto-color-emoji-v30-emoji-regular.woff2') format('woff2'),
       url('/fonts/noto-color-emoji-v30-emoji-regular.ttf') format('truetype');
}`),o)return;o=!0,xt(),i=E,q("dark",!1),console.info("ðŸ–¨ï¸","print view enabled")}else{if((T=!1)===o)return;o=!1,q("dark",E=i)}e=Array.from(J('a[href^="/"]',J("#main-content"),!0));e.length&&(imgs=[],Q(e,function(e,t,n,a,r,i){T?(a=(n=X(t,"href")).match(/^\/([^\/]+)\/(\#.*)?$/))&&a[1]!==window.articleSlug&&$(t,{"data-href":n,href:"/download/"+a[1]+".html"}):(n=X(t,"data-href"))&&$(t,{href:n})}))}),e.matches&&q("print",!0),G=J("#reader"),L=J(".reader-container"),_.body.appendChild(L),ee=G.getAttribute("data-foreword"),te=G.querySelector(".index-btn"),ne=G.querySelector(".status > .cur"),ae=ne.querySelector("span.chapter"),re=ne.querySelector("span.subchapter"),A=G.querySelector(".status > .next"),I=A.querySelector("a.prev"),S=A.querySelector("a.next"),ie=A.querySelector("span.chapter"),oe=A.querySelector("span.subchapter"),ce=J("#reader-index"),z("click",function(e){e.preventDefault();var t=e.target===I?"prev":"next";e.target===I&&A.classList.contains("no-prev")||e.target===S&&A.classList.contains("no-next")||(Ke(e.target),w("event","reader_"+t,{event_category:"reader_nav",event_label:t+" nav"}))},[I,S]),J(".reader-index .ebook-download")),l=(z("click",function(e,t){e.preventDefault();e=J("#download");document.location.href=e.href},[J("button",e),J("input",e)]),ebook_download_setup=!1,Array.from(J(".reader-index,.download-index",L,!0))),e=(z("click",function(e){var t=e.target;if(t){if(-1===l.indexOf(t)&&!P(t,"reader-container"))for(;t!==v;){if(P(t,"reader-container")||P(t,"popup-w"))return;if(!(t=Y(t)))return}U(!1)}},v),z("click",function(e){e.preventDefault(),e.stopPropagation(),U("index"),s||(_t(),s=!0)},te),J("#select-lg")),e=(e&&z("click",function(e){e.preventDefault(),e.stopPropagation(),U("lg")},e),J("#show-social")),u=(e&&z("click",function(e){e.preventDefault(),e.stopPropagation(),Ge(),function t(n){w("event",n?"social_close":"social_open",{event_category:"social",event_label:n?"Close social share":"Open social share"}),U(!1),Ge(),requestAnimationFrame(function(){var e;n?(B(M,["noscroll","reader-win"],!0),it([N,H])):(e=et({el:J("#social-popup"),class:"social-popup light-o",onclose:function(){t(!0)}}),J(".layer",N).scrollTo(0,0),Q(J("img[data-z], [data-anim]",e.i,!0),function(e,t){pt(t)}))})}()},e),J("#main-content")),e=(u&&z("click",function(e){for(var t=e.target;t&&"CITE"!==t.nodeName;){if(t===u||t===document.body)return;t=Y(t)}t&&(e.preventDefault(),e.stopPropagation(),function d(f,p){w("event",p?"cite_close":"cite_open",{event_category:"cite",event_label:p?"Close citation":"Open citation"}),U(!1);for(var i,o,e,t=X(f,"rel"),h=(void 0===Me&&(e=J("#citations"),Me=!!e&&JSON.parse(e.textContent)),{}),m=(Me&&Me[t]&&(h=Me[t]),Y(f));m&&"P"!==m.nodeName;)(m=Y(m))===document.body&&(m=!1);h.context||((e=X(f,"rel"))?(i=[],Q(e=e.split(","),function(e,t){if("p"===t)o=!0;else{var n=t.match(/^(next|prev)(\d+)?$/);if(n){o=!0;var a=1;for(n[2]&&!isNaN(n[2])&&(a=parseInt(n[2])),e=0;e<a;e++){var r=("next"===n[1]?Oe:Fe)(m,e+1);r&&i.push(r.innerText)}}}o&&i.unshift(m.innerText),h.context=i.length?i.join("\n"):"chapter"})):h.context="chapter"),h.text||(h.text=X(J("#citations"),"data-default-desc").replace("[CITE]",f.innerText)),requestAnimationFrame(function(){if(p)B(M,["noscroll","reader-win"],!0),it([N,H]);else{var e,t=et({el:J("#cite-popup"),class:"cite-popup light-o",onclose:function(){d(f,!0)}}),n=J(".layer",N),a=J(".desc",n);switch(n.scrollTo(0,0),Be(a),h.title&&D(a,O("h3",!1,h.title)),h.context){case"p":e=m.innerText;break;case"chapter":for(var r=Fe(m);r&&!P(r,["chapter","subchapter"],!0);)r=Fe(r);var i=[];if(r){i.push(F(r).innerText);for(var o=Oe(r);o&&!P(o,["chapter","subchapter"],!0);){var c,s=F(o).innerText;o.classList.contains("quote")&&(c="A"!==(c=o).nodeName?J("a",o):c)&&(s="# "+J(".title",c).innerText,s=(s+="\n"+J(".title",c).innerText)+"\n"+c.href),i.push(s),o=Oe(o)}}e=i.join("\n");break;default:e=h.context}h.extra_context&&(e+="\n"+h.extra_context);var l=(l=h.prompt)||(l=X(J("#citations"),"data-default-prompt")).replace("[URL]",document.location.href).replace("[CONTEXT]",e).replace("[QUERY]",f.innerText),u=(h.extra_prompt&&(l+="\n"+h.extra_prompt),encodeURIComponent(l));D(a,O("p",{},h.text)),Q(J("a",J(".buttons",n),!0),function(e,n){switch(X(n,"data-ref")){case"chatgpt":n.href="https://chatgpt.com/?q="+u;break;case"perplexity":n.href="https://perplexity.ai/?q="+u;break;case"you":var t=h.model||"claude_3_5_sonnet";n.href="https://you.com/search?tbm=youchat&cfr=chat&chatMode="+t+"&q="+u;break;case"prompt":z("click",function(t){t.preventDefault();t=O("textarea");t.value=l,D(document.body,t),t.select();try{document.execCommand("copy"),document.body.removeChild(t),ht(n,"data-text")||$(n,{"data-text":n.innerHTML}),n.innerHTML="âœ…",setTimeout(function(){n.innerHTML=X(n,"data-text")},2e3)}catch(e){Be(a),D(a,t)}},n)}}),Q(J("img[data-z], [data-anim]",t.i,!0),function(e,t){pt(t)})}})}(t))},u),J(".main")),d=[".reader-link"];if(["h1","h2","h3","h4","h5","p"].forEach(function(e){d.push(e+".chapter,"+e+".subchapter")}),P(v,"no-reader"))k=[];else{if(0===(k=Array.from(e.querySelectorAll(d.join(",")))).length){var f=1,p=e.querySelectorAll("h1.bighead");if(0===p.length&&(f=2,p=e.querySelectorAll("h2.bighead")),0===p.length&&(f=3,p=e.querySelectorAll("h3.bighead")),0<p.length){hbig=Array.from(e.querySelectorAll(".bighead")),p=Array.from(p),h1first=hbig.indexOf(p[0]);for(var h=[],m=1;m<=5;m++)m<=f||h.push("h"+m+".bighead");h.length&&(h2big=e.querySelectorAll(h.join(","))),p.forEach(function(e){e.classList.add("chapter")}),h2big.length&&(h2big=Array.from(h2big)).forEach(function(e){var t=hbig.indexOf(e);e.classList.add(t<h1first?"chapter":"subchapter")})}k=Array.from(e.querySelectorAll(d.join(",")))}z("click",function(e,t,n){for(e.preventDefault(),t=e.target;"A"!==t.nodeName;)t=t.parentElement;(n=J(t.getAttribute("data-chapter-link")))&&(Ke(n),w("event","reader_link_"+n.id,{event_category:"reader_link_selection",event_label:R(n)}))},e.querySelectorAll("[data-chapter-link]"))}if(0===k.length)B(G,"nochapters");else{var b,p=_.documentElement.getAttribute("lang");try{b=new Intl.NumberFormat(p,{minimumFractionDigits:0,maximumFractionDigits:0})}catch(e){}var x=_.createElement("li"),e=_.createElement("a"),p=_.createElement("span"),g=_.createElement("span");B(p,"num"),g.classList.add("text"),e.appendChild(p),e.appendChild(g),x.appendChild(e),requestAnimationFrame(function(){for(var t,e,n,a,r,i,o,c,s,l,u,d=[],f=0,p={},h=0,m=k.length;h<m;h++){if((tag=k[h]).id||(tag.id="_h"+h),tag.type=!1,tag.index=h,tag.setAttribute("data-index",h),u=c=s=!1,i=tag.classList.contains("chapter")?(d=[[++f,0]],o=!(r=!0)):(r=!1,o=(o=tag.getAttribute("data-level"))&&parseInt(o),tag.classList.contains("subchapter")),e=(t=x.cloneNode(!0)).querySelector("a"),n=e.querySelector("span.num"),a=e.querySelector("span.text"),tag.classList.contains("reader-link")){s=!0;try{c=JSON.parse(tag.getAttribute("data-reader-link"))}catch(e){console.error(e);continue}c.level&&(o=c.level),c.classes&&(u=c.classes instanceof Array?c.classes:[c.classes]),a.innerHTML=c.title||tag.innerHTML,c.chapter?(tag.readerInfo=c,a.innerHTML=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+(c.title||tag.innerHTML),tag.chapterTitle=a.innerHTML,o=!(r=!(s=!(d=[[++f,0]])))):c.subchapter?(i=!0,tag.readerInfo=c,a.innerHTML=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+(c.title||tag.innerHTML),tag.chapterTitle=a.innerHTML,s=!1):(t.classList.add("reader-link"),tag.readerInfo=c,tag.type="link",tag.chapterTitle=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+" "+a.innerHTML)}else{if(tag.hasAttribute("data-reader-info"))try{c=JSON.parse(tag.getAttribute("data-reader-info"))}catch(e){console.error(e);continue}c?(c.level&&(o=c.level),tag.readerInfo=c,a.innerHTML=(c.emoji?"<span class=e"+(c.emoji_anim?' data-anim="'+c.emoji_anim+'"':"")+">"+c.emoji+"</span> ":"")+(c.title||tag.innerHTML),tag.chapterTitle=a.innerHTML,c.classes&&(u=c.classes instanceof Array?c.classes:[c.classes])):(tag.chapterTitle=tag.innerHTML,a.innerHTML=tag.innerHTML)}var g=_.createElement("div");if(g.innerHTML=tag.chapterTitle,tag.chapterTitleText=tag.readerInfo&&tag.readerInfo.titleText?tag.readerInfo.titleText:g.innerText,tag.readerInfo&&tag.readerInfo.indexTitle&&(a.innerHTML=c.indexTitle),tag.readerInfo&&tag.readerInfo.emoji_anim&&(ft(J("[data-anim]",g=F(bt,null,Ue(tag.chapterTitle))),!0),tag.chapterTitle=g.innerHTML),isNaN(o)||!1===o||o--,o<0&&(o=0),tag.readerInfo||(tag.readerInfo={}),tag.readerInfo.level=o,r||tag.readerInfo.chapter?tag.readerInfo.chapter=!0:(i||tag.readerInfo.subchapter)&&(tag.readerInfo.subchapter=i),r)t.classList.add("chapter"),n.innerHTML=(b?b.format(f):f)+".",tag.chapterIndex=n.innerHTML;else{if(void 0===d[o]&&(void 0===d[o-1]?(console.error("invalid parent",tag,d,o),d[o]=[-1,0]):d[o]=[d[o-1][1],0]),s)n.innerHTML="&nbsp;",B(a_num_sub=n.cloneNode(!0),"e"),a_num_sub.innerHTML=c.emoji||"ðŸ“Œ",c.emoji&&c.emoji_anim&&$(a_num_sub,{"data-anim":c.emoji_anim}),n.parentNode.insertBefore(a_num_sub,n.nextSibling);else{for(;d[o+1];)d.pop();d[o][1]++,l=[],d.reverse().forEach(function(e){(a_num_sub=n.cloneNode(!0)).innerHTML=(b?b.format(e[1]):e[1])+".",n.parentNode.insertBefore(a_num_sub,n.nextSibling),l.push(a_num_sub.innerHTML)}),d.reverse(),n.innerHTML=(b?b.format(d[0][0]):d[0][0])+".",l.reverse(),l.unshift(n.innerHTML),tag.chapterIndex=l.join("")}t.classList.add("subchapter"),u&&u.forEach(function(e){t.classList.add(e)}),0<o&&t.classList.add("l"+(o+1))}$(e,{"data-index":h,href:(p[tag.id]=tag).readerInfo&&tag.readerInfo.link?tag.readerInfo.link:"#"+tag.id}),ce.appendChild(t)}imgs=Array.from(J("img[data-d],img[data-z],img[data-zd],[data-anim]",ce,!0)),q("i",imgs);var v=Array.from(J("a.chapter-link",!1,!0));Q(v,function(e,t,n,a,r){n=X(t,"data-chapter-id"),(a=p[n])&&((r=J("span",t))&&(r.innerHTML=a.chapterIndex),$(t,{"data-index":X(a,"data-index"),title:a.chapterTitleText}))}),se=Array.from(ce.querySelectorAll("[data-index]")),_.location.hash&&function(){var n;try{if(!(n=J(_.location.hash.toString())))return;var e=Qe(n);if(isNaN(e)||!1===e)return;n=k[e]}catch(e){return console.error("hash",e)}function t(){var e,t=n.readerInfo;t&&t.expand&&(e=J(t.expand))&&(vt(e,!0),t.expand=!1),Je(n,80,{})}_t();e=n.chapterTitleText||n.innerText;y.history&&y.history.replaceState("",e,_.location.pathname+"#"+n.id),_.title=e,t(),requestAnimationFrame(function(){t()}),setTimeout(function(){t()},1e3)}(),v.length&&z("click",function(e){for(var t=e.target;!t.classList.contains("chapter-link")&&"A"!==t.tagName;)t=t.parentElement;var n=Qe(t);isNaN(n)||!1===n||(e.preventDefault(),e=k[n],Ke(t),w("event","reader_chapter_link_"+e.id,{event_category:"reader_chapter_link",event_label:R(e)}))},v),z("click",function(e){e.preventDefault();for(var t=e.target;!t.classList.contains("reader-link")&&"A"!==t.tagName;)t=t.parentElement;var n,e=Qe(t);isNaN(e)||!1===e||((n=(e=k[e]).readerInfo)&&n.link?n.target&&"_blank"===n.target?y.open(n.link):_.location.href=n.link:(Ke(t),w("event","reader_index_"+e.id,{event_category:"reader_index_selection",event_label:R(e)})))},se),Z=!0,q("reader-setup-done")}),z("scroll",function(){var e=y.scrollY/(v.offsetHeight-y.innerHeight)*100;requestAnimationFrame(function(){ot(G,{"border-image-source":"linear-gradient(to right, var(--readerbarfill) "+e+"%, var(--readerbar) 0%)"})}),K||We()},window),z("wheel",function(e){Ae&&clearTimeout(Ae),j&&j(),K=!1},window),z("keydown",function(e){if(qe){if("Escape"===event.key)return U(!1);var t;"index"===qe&&(t=ce.parentElement,"ArrowUp"===event.key?t.scrollTop-=50:"ArrowDown"===event.key&&(t.scrollTop+=50))}},_),We(),z("keydown",function(e){if(-1!==["INPUT","TEXTAREA","SELECT"].indexOf(e.target.tagName)||e.altKey||e.ctrlKey)return!1;var t;37==e.keyCode?y.pageXOffset<=0&&(e.preventDefault(),0===(t=Qe(I))&&W&&Qe(W)===t?(Je(),W=!1):Ke(I)):39==e.keyCode&&_.body.scrollWidth-y.innerWidth<=y.pageXOffset&&(e.preventDefault(),Ke(S))},_)}T&&xt(),"#print"===_.location.hash&&U("download",0,!0)})}(window,document);